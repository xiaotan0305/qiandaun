!function(t){"use strict";function e(t){this._obj=t}function n(t){this._init()._extend(t)}if(void 0===t)throw new Error("Fangcheck requires browser environment");var r=t.document,o=t.Math,c=r.getElementsByTagName("head")[0],a=t.location;e.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},n.prototype={_init:function(){var t={apiserver:(a.host,a.href,"recaptcha.fang.com/"),protocol:a.protocol+"//",typePath:"/?c=index&a=getType",static_servers:function(t,e){var n="static.soufunimg.com";return"activities.test.m.fang.com"!==t&&"activities.m.test.fang.com"!==t||(n="static.test.soufunimg.com"),n}(a.host,a.href)};return"recaptcha.fang.com/"===t.apiserver&&(t.protocol="https://"),this._extend(t),this},_extend:function(t){var n=this;return new e(t)._each(function(t,e){n[t]=e}),n}};var i=function(t){return"number"==typeof t},u=function(t){return"string"==typeof t},f=function(t){return"boolean"==typeof t},s=function(t){return"function"==typeof t},l=function(t){return Array.isArray&&Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t)},p={},h={},d=function(){return parseInt(1e4*o.random())+(new Date).valueOf()},v=function(t,e){var n=r.createElement("script");n.charset="UTF-8",n.async=!0,n.onerror=function(){e(!0)};var o=!1;n.onload=n.onreadystatechange=function(){o||n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(o=!0,setTimeout(function(){e(!1)},0))},n.src=t,c.appendChild(n)},g=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},y=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t},m=function(t){if(!t)return"";var n="&";return new e(t)._each(function(t,e){(u(e)||i(e)||f(e))&&(n=n+encodeURIComponent(t)+"="+encodeURIComponent(e)+"&")}),"&"===n&&(n=""),n.replace(/&$/,"")},w=function(t,e,n,r){e=g(e);var o=y(n)+m(r);return e&&(o=t+e+o),o},_=function(t,e,n,r,o){l(e)||(e=[e]);var c=function(a){var i=w(t,e[a],n,r);v(i,function(t){t?a>=e.length-1?o(!0):c(a+1):o(!1)})};c(0)},E=function(e,n,r,o){var c="fangcheck_"+d();t[c]=function(e){o(e),t[c]=void 0;try{delete t[c]}catch(t){}},_(r.protocol,e,n,{gt:r.gt,challenge:r.challenge,time:(new Date).getTime(),callback:c},function(t){t&&console.log(t)})},k=function(t,e){var n={networkError:"\u7f51\u7edc\u9519\u8bef",gtTypeError:"fc\u5b57\u6bb5\u4e0d\u662f\u5b57\u7b26\u4e32\u7c7b\u578b"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};(t.Fangcheck||r.getElementById("fc_lib"))&&(h.slide="loaded"),t.initFangcheck=function(e,r){var o=new n(e);e.http&&(o.protocol=e.http),E([o.apiserver],o.typePath,o,function(e){if("100"===e.code){var n=e.type||"wap",c=function(){o._extend(e),o._extend({load:_}),r(new t.Fangcheck(o))};p[n]=p[n]||[];var a=h[n]||"init";"init"===a?(h[n]="loading",p[n].push(c),_(o.protocol,e.static_servers||o.static_servers,e[n]||e.path,null,function(t){if(t)h[n]="fail",k("networkError",o);else{h[n]="loaded";for(var e=p[n],r=0,c=e.length;r<c;r+=1){var a=e[r];s(a)&&a()}p[n]=[]}})):"loaded"===a?c():"fail"===a?k("networkError",o):"loading"===a&&p[n].push(c)}else k("networkError",e)})}}(this);