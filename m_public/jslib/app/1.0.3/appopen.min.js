(function(b,a){if(typeof define==="function"){define(function(d,c,e){e.exports=a(b)})}else{if(typeof module==="object"){module.exports=a(b)}else{b.openApp=a(b)}}})(window,function factory(d){var a=d.document,e=a.createElement("frame"),c={},b=function(g,f){return(c=f,new b.fn.init(g))};b.fn=b.prototype={constructor:b,init:function(i){var o=this;for(var k in c){o[k]=c[k]}this.options=i,i.version="v1",this.isDownload=i.download||!1,this.timeout=i.timeout||1000,i.from=i.from||"h5";if(i.href){var j=i.href,n={from:i.from};if(this.isChrome){var l=j.split("://"),h=l[0],g=l[1],f=i.bag||"com.soufun.soufun";j="intent://"+g+"#Intent;scheme="+h+";package="+f+";end"}this.paramUrl=j}o.create();d.onblur=function(){clearTimeout(o.timeload),o.timeload=null}},create:function(){this.iClose||(e.parentNode||(e.setAttribute("id","J_smartFrame"),e.style.cssText="display:none",a.body.appendChild(e)),this.frame=e)},download:function(h){var g=Date.now(),f=this.options;if(!h||g-h<this.timeout+200){if(this.cover){d.location.replace(this.bannerUrl)}else{d.location=this.bannerUrl}f.log&&f.log.apply(null,[2])}},redirect:function(){var g=this.options.version,i=this.frame,h="click_sb_"+g+"_manual";if(this.paramUrl){if(this.isChrome){d.location=this.paramUrl}else{if(i){i.setAttribute("src",this.paramUrl)}}}},install:function(){var f=this,g=Date.now();f.isDownload||(f.timeload=setTimeout(function(){f.download(g)},f.timeout)),f.redirect()}};b.fn.init.prototype=b.fn;return function(f){var p={},j=d,g=j.navigator.standalone,k=j.navigator.userAgent,q=/UCBrowser/i.test(k),m=/MQQBrowser/i.test(k),o;p.platform="android";if(null!=k.match(/iPhone|iPod|iPad/i)){p.platform="ios";p.isIpad=null!=k.match(/iPad/i)}else{if(null!=k.match(/Android/i)){if(null!=k.match(/Mobile/i)){p.isChrome=null!=k.match(/Chrome/i)&&null==k.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i);p.platform=p.isChrome?"":"android"}}}p.cover=f.cover||!1,f.crossplat=f.crossplat||!1;if(/MicroMessenger/i.test(k)){var i=f.weiXinUrl||"http://a.app.qq.com/o/simple.jsp?pkgname=com.soufun.decoration.app";p.bannerUrl=i}else{if("ios"!=p.platform||f.crossplat){var h=f.url||"http://download.3g.fang.com/soufun_android_30007.apk";p.bannerUrl=h}else{p.bannerUrl=f.appstoreUrl||("https://itunes.apple.com/cn/app/soufun/id413993350?mt=8&ls=1")}}var n=f.appurl||j.appurl||j.seajs&&j.seajs.data.vars.appurl;if(!n){n='waptoapp/{"destination":"home"}'}if(!f.href||f.href==""){f.href="ios"!=p.platform?"soufunandroid://":"soufun://"}if(n){f.href+=n}o=!p.platform||g?null:b(f,p);return{support:null!=o,openApp:function(){f.log&&f.log.apply(null,[1]);null!=o?o.install():(f.log&&f.log.apply(null,[2]),p.cover?j.location.replace(p.bannerUrl):j.location.href=p.bannerUrl)}}}});