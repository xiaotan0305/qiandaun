(function(b,a){if(typeof define==="function"){define(function(d,c,e){e.exports=a(b)})}else{if(typeof module==="object"){module.exports=a(b)}else{b.openApp=a(b)}}})(window,function factory(d){var a=d.document,e=a.createElement("frame"),c={},b=function(g,f){return(c=f,new b.fn.init(g))};b.fn=b.prototype={constructor:b,init:function(i){var o=this;for(var k in c){o[k]=c[k]}this.options=i,i.version="v1",this.isDownload=i.download||!1,this.timeout=i.timeout||1000,i.from=i.from||"h5";if(i.href){var j=i.href,n={from:i.from};if(this.isChrome){var l=j.split("://"),h=l[0],g=l[1],f=i.bag||"com.soufun.soufun";j="intent://"+g+"#Intent;scheme="+h+";package="+f+";end"}this.paramUrl=j}o.create();d.onblur=function(){clearTimeout(o.timeload),o.timeload=null}},create:function(){this.iClose||(e.parentNode||(e.setAttribute("id","J_smartFrame"),e.style.cssText="display:none",a.body.appendChild(e)),this.frame=e)},download:function(h){var g=Date.now(),f=this.options;if(!h||g-h<this.timeout+200){if(this.cover){d.location.replace(this.bannerUrl)}else{d.location=this.bannerUrl}f.log&&f.log.apply(null,[2])}},redirect:function(){var g=this.options.version,i=this.frame,h="click_sb_"+g+"_manual";if(this.paramUrl){if(this.isChrome){d.location=this.paramUrl}else{if(i){i.setAttribute("src",this.paramUrl)}}}},install:function(){var f=this,g=Date.now();f.isDownload||(f.timeload=setTimeout(function(){f.download(g)},f.timeout)),f.redirect()}};b.fn.init.prototype=b.fn;return function(f){var o={},i=d,g=i.navigator.standalone,j=i.navigator.userAgent,p=/UCBrowser/i.test(j),k=/MQQBrowser/i.test(j),n;o.platform="android";if(null!=j.match(/iPhone|iPod|iPad/i)){o.platform="ios";o.isIpad=null!=j.match(/iPad/i)}else{if(null!=j.match(/Android/i)){if(null!=j.match(/Mobile/i)){o.isChrome=null!=j.match(/Chrome/i)&&null==j.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i);o.platform=o.isChrome?"":"android"}}}o.cover=f.cover||!1,f.crossplat=f.crossplat||!1;if("ios"!=o.platform||f.crossplat){var h=f.url||"http://download.3g.fang.com/soufun_android_30007.apk";o.bannerUrl=h}else{if(/MicroMessenger/i.test(j)){o.bannerUrl="http://a.app.qq.com/o/simple.jsp?pkgname=com.soufun.decoration.app"}else{o.bannerUrl=f.appstoreUrl}}var m=f.appurl||i.appurl||i.seajs&&i.seajs.data.vars.appurl;if(!m){m='waptoapp/{"destination":"home"}'}if(!f.href||f.href==""){f.href="ios"!=o.platform?"soufunandroid://":"soufun://"}if(m){f.href+=m}n=!o.platform||g?null:b(f,o);return{support:null!=n,openApp:function(){f.log&&f.log.apply(null,[1]);null!=n?n.install():(f.log&&f.log.apply(null,[2]),o.cover?i.location.replace(o.bannerUrl):i.location.href=o.bannerUrl)}}}});