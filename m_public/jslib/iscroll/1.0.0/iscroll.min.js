/*! iScroll v5.1.2 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
(function(d,a,c,b){if(typeof define==="function"){define("iscroll/1.0.0/iscroll",[],function(){return b(d,a,c)})}else{if(typeof exports==="object"){module.exports=b(d,a,c)}else{d.IScroll=b(d,a,c)}}})(typeof window!=="undefined"?window:this,document,Math,function(e,f,b){var a=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(j){e.setTimeout(j,1000/60)};var g=(function(){var n={};var o=f.createElement("div").style;var l=(function(){var s=["t","webkitT","MozT","msT","OT"],q,r=0,p=s.length;for(;r<p;r++){q=s[r]+"ransform";if(q in o){return s[r].substr(0,s[r].length-1)}}return false})();function m(p){if(l===false){return false}if(l===""){return p}return l+p.charAt(0).toUpperCase()+p.substr(1)}n.getTime=Date.now||function j(){return new Date().getTime()};n.extend=function(r,q){for(var p in q){r[p]=q[p]}};n.addEvent=function(s,r,q,p){s.addEventListener(r,q,!!p)};n.removeEvent=function(s,r,q,p){s.removeEventListener(r,q,!!p)};n.prefixPointerEvent=function(p){return e.MSPointerEvent?"MSPointer"+p.charAt(9).toUpperCase()+p.substr(10):p};n.momentum=function(v,r,s,p,w,x){var q=v-r,t=b.abs(q)/s,y,u;x=x===undefined?0.0006:x;y=v+(t*t)/(2*x)*(q<0?-1:1);u=t/x;if(y<p){y=w?p-(w/2.5*(t/8)):p;q=b.abs(y-v);u=q/t}else{if(y>0){y=w?w/2.5*(t/8):0;q=b.abs(v)+y;u=q/t}}return{destination:b.round(y),duration:u}};var k=m("transform");n.extend(n,{hasTransform:k!==false,hasPerspective:m("perspective") in o,hasTouch:"ontouchstart" in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:m("transition") in o});n.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!(/Chrome\/\d/.test(e.navigator.appVersion));n.extend(n.style={},{transform:k,transitionTimingFunction:m("transitionTimingFunction"),transitionDuration:m("transitionDuration"),transitionDelay:m("transitionDelay"),transformOrigin:m("transformOrigin")});n.hasClass=function(q,r){var p=new RegExp("(^|\\s)"+r+"(\\s|$)");return p.test(q.className)};n.addClass=function(q,r){if(n.hasClass(q,r)){return}var p=q.className.split(" ");p.push(r);q.className=p.join(" ")};n.removeClass=function(q,r){if(!n.hasClass(q,r)){return}var p=new RegExp("(^|\\s)"+r+"(\\s|$)","g");q.className=q.className.replace(p," ")};n.offset=function(p){var r=-p.offsetLeft,q=-p.offsetTop;while(p=p.offsetParent){r-=p.offsetLeft;q-=p.offsetTop}return{left:r,top:q}};n.preventDefaultException=function(r,q){for(var p in q){if(q[p].test(r[p])){return true}}return false};n.extend(n.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});n.extend(n.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(p){return p*(2-p)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(p){return b.sqrt(1-(--p*p))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(q){var p=4;return(q=q-1)*q*((p+1)*q+p)+1}},bounce:{style:"",fn:function(p){if((p/=1)<(1/2.75)){return 7.5625*p*p}else{if(p<(2/2.75)){return 7.5625*(p-=(1.5/2.75))*p+0.75}else{if(p<(2.5/2.75)){return 7.5625*(p-=(2.25/2.75))*p+0.9375}else{return 7.5625*(p-=(2.625/2.75))*p+0.984375}}}}},elastic:{style:"",fn:function(p){var q=0.22,r=0.4;if(p===0){return 0}if(p==1){return 1}return(r*b.pow(2,-10*p)*b.sin((p-q/4)*(2*b.PI)/q)+1)}}});n.tap=function(r,p){var q=f.createEvent("Event");q.initEvent(p,true,true);q.pageX=r.pageX;q.pageY=r.pageY;r.target.dispatchEvent(q)};n.click=function(r){var q=r.target,p;if(!(/(SELECT|TEXTAREA)/i).test(q.tagName)){p=f.createEvent("MouseEvents");p.initMouseEvent("click",true,true,r.view,1,q.screenX,q.screenY,q.clientX,q.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null);p._constructed=true;q.dispatchEvent(p)}};return n})();function d(m,k,j){this.wrapper=typeof m=="string"?f.querySelector(m):m;var n=arguments[2]?arguments[2]:0;this.scroller=this.wrapper.children[n];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var l in k){this.options[l]=k[l]}this.translateZ=this.options.HWCompositing&&g.hasPerspective?" translateZ(0)":"";this.options.useTransition=g.hasTransition&&this.options.useTransition;this.options.useTransform=g.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?g.ease[this.options.bounceEasing]||g.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.shrinkScrollbars=="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}d.prototype={version:"5.1.2",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(j){if(j.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(k){if(g.eventType[k.type]!=1){if(k.button!==0){return}}if(!this.enabled||(this.initiated&&g.eventType[k.type]!==this.initiated)){return}if(this.options.preventDefault&&!g.isBadAndroid&&!g.preventDefaultException(k.target,this.options.preventDefaultException)){k.preventDefault()}var j=k.touches?k.touches[0]:k,l;this.initiated=g.eventType[k.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=g.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;l=this.getComputedPosition();this._translate(b.round(l.x),b.round(l.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=j.pageX;this.pointY=j.pageY;this._execEvent("beforeScrollStart")},_move:function(o){if(!this.enabled||g.eventType[o.type]!==this.initiated){return}if(this.options.preventDefault){o.preventDefault()}var q=o.touches?o.touches[0]:o,l=q.pageX-this.pointX,k=q.pageY-this.pointY,p=g.getTime(),j,r,n,m;this.pointX=q.pageX;this.pointY=q.pageY;this.distX+=l;this.distY+=k;n=b.abs(this.distX);m=b.abs(this.distY);if(p-this.endTime>300&&(n<10&&m<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(n>m+this.options.directionLockThreshold){this.directionLocked="h"}else{if(m>=n+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){o.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}k=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){o.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}l=0}}l=this.hasHorizontalScroll?l:0;k=this.hasVerticalScroll?k:0;j=this.x+l;r=this.y+k;if(j>0||j<this.maxScrollX){j=this.options.bounce?this.x+l/3:j>0?0:this.maxScrollX}if(r>0||r<this.maxScrollY){r=this.options.bounce?this.y+k/3:r>0?0:this.maxScrollY}this.directionX=l>0?-1:l<0?1:0;this.directionY=k>0?-1:k<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(j,r);if(p-this.startTime>300){this.startTime=p;this.startX=this.x;this.startY=this.y}},_end:function(p){if(!this.enabled||g.eventType[p.type]!==this.initiated){return}if(this.options.preventDefault&&!g.preventDefaultException(p.target,this.options.preventDefaultException)){p.preventDefault()}var r=p.changedTouches?p.changedTouches[0]:p,l,k,o=g.getTime()-this.startTime,j=b.round(this.x),u=b.round(this.y),t=b.abs(j-this.startX),s=b.abs(u-this.startY),m=0,q="";this.isInTransition=0;this.initiated=0;this.endTime=g.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(j,u);if(!this.moved){if(this.options.tap){g.tap(p,this.options.tap)}if(this.options.click){g.click(p)}this._execEvent("scrollCancel");return}if(this._events.flick&&o<200&&t<100&&s<100){this._execEvent("flick");return}if(this.options.momentum&&o<300){l=this.hasHorizontalScroll?g.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:j,duration:0};k=this.hasVerticalScroll?g.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:u,duration:0};j=l.destination;u=k.destination;m=b.max(l.duration,k.duration);this.isInTransition=1}if(this.options.snap){var n=this._nearestSnap(j,u);this.currentPage=n;m=this.options.snapSpeed||b.max(b.max(b.min(b.abs(j-n.x),1000),b.min(b.abs(u-n.y),1000)),300);j=n.x;u=n.y;this.directionX=0;this.directionY=0;q=this.options.bounceEasing}if(j!=this.x||u!=this.y){if(j>0||j<this.maxScrollX||u>0||u<this.maxScrollY){q=g.ease.quadratic}this.scrollTo(j,u,m,q);return}this._execEvent("scrollEnd")},_resize:function(){var j=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){j.refresh()},this.options.resizePolling)},resetPosition:function(k){var j=this.x,l=this.y;k=k||0;if(!this.hasHorizontalScroll||this.x>0){j=0}else{if(this.x<this.maxScrollX){j=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){l=0}else{if(this.y<this.maxScrollY){l=this.maxScrollY}}if(j==this.x&&l==this.y){return false}this.scrollTo(j,l,k,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var j=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=g.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(k,j){if(!this._events[k]){this._events[k]=[]}this._events[k].push(j)},off:function(l,k){if(!this._events[l]){return}var j=this._events[l].indexOf(k);if(j>-1){this._events[l].splice(j,1)}},_execEvent:function(m){if(!this._events[m]){return}var k=0,j=this._events[m].length;if(!j){return}for(;k<j;k++){this._events[m][k].apply(this,[].slice.call(arguments,1))}},scrollBy:function(j,m,k,l){j=this.x+j;m=this.y+m;k=k||0;this.scrollTo(j,m,k,l)},scrollTo:function(j,m,k,l){l=l||g.ease.circular;this.isInTransition=this.options.useTransition&&k>0;if(!k||(this.options.useTransition&&l.style)){this._transitionTimingFunction(l.style);this._transitionTime(k);this._translate(j,m)}else{this._animate(j,m,k,l.fn)}},scrollToElement:function(k,l,j,o,n){k=k.nodeType?k:this.scroller.querySelector(k);if(!k){return}var m=g.offset(k);m.left-=this.wrapperOffset.left;m.top-=this.wrapperOffset.top;if(j===true){j=b.round(k.offsetWidth/2-this.wrapper.offsetWidth/2)}if(o===true){o=b.round(k.offsetHeight/2-this.wrapper.offsetHeight/2)}m.left-=j||0;m.top-=o||0;m.left=m.left>0?0:m.left<this.maxScrollX?this.maxScrollX:m.left;m.top=m.top>0?0:m.top<this.maxScrollY?this.maxScrollY:m.top;l=l===undefined||l===null||l==="auto"?b.max(b.abs(this.x-m.left),b.abs(this.y-m.top)):l;this.scrollTo(m.left,m.top,l,n)},_transitionTime:function(k){k=k||0;this.scrollerStyle[g.style.transitionDuration]=k+"ms";if(!k&&g.isBadAndroid){this.scrollerStyle[g.style.transitionDuration]="0.001s"}if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTime(k)}}},_transitionTimingFunction:function(k){this.scrollerStyle[g.style.transitionTimingFunction]=k;if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTimingFunction(k)}}},_translate:function(j,l){if(this.options.useTransform){this.scrollerStyle[g.style.transform]="translate("+j+"px,"+l+"px)"+this.translateZ}else{j=b.round(j);l=b.round(l);this.scrollerStyle.left=j+"px";this.scrollerStyle.top=l+"px"}this.x=j;this.y=l;if(this.indicators){for(var k=this.indicators.length;k--;){this.indicators[k].updatePosition()}}},_initEvents:function(j){var k=j?g.removeEvent:g.addEvent,l=this.options.bindToWrapper?this.wrapper:e;k(e,"orientationchange",this);k(e,"resize",this);if(this.options.click){k(this.wrapper,"click",this,true)}if(!this.options.disableMouse){k(this.wrapper,"mousedown",this);k(l,"mousemove",this);k(l,"mousecancel",this);k(l,"mouseup",this)}if(g.hasPointer&&!this.options.disablePointer){k(this.wrapper,g.prefixPointerEvent("pointerdown"),this);k(l,g.prefixPointerEvent("pointermove"),this);k(l,g.prefixPointerEvent("pointercancel"),this);k(l,g.prefixPointerEvent("pointerup"),this)}if(g.hasTouch&&!this.options.disableTouch){k(this.wrapper,"touchstart",this);k(l,"touchmove",this);k(l,"touchcancel",this);k(l,"touchend",this)}k(this.scroller,"transitionend",this);k(this.scroller,"webkitTransitionEnd",this);k(this.scroller,"oTransitionEnd",this);k(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var k=e.getComputedStyle(this.scroller,null),j,l;if(this.options.useTransform){k=k[g.style.transform].split(")")[0].split(", ");j=+(k[12]||k[4]);l=+(k[13]||k[5])}else{j=+k.left.replace(/[^-\d.]/g,"");l=+k.top.replace(/[^-\d.]/g,"")}return{x:j,y:l}},_initIndicators:function(){var l=this.options.interactiveScrollbars,n=typeof this.options.scrollbars!="string",p=[],k;var o=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){k={el:c("v",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(k.el);p.push(k)}if(this.options.scrollX){k={el:c("h",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(k.el);p.push(k)}}if(this.options.indicators){p=p.concat(this.options.indicators)}for(var m=p.length;m--;){this.indicators.push(new i(this,p[m]))}function j(r){for(var q=o.indicators.length;q--;){r.call(o.indicators[q])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){j(function(){this.fade()})});this.on("scrollCancel",function(){j(function(){this.fade()})});this.on("scrollStart",function(){j(function(){this.fade(1)})});this.on("beforeScrollStart",function(){j(function(){this.fade(1,true)})})}this.on("refresh",function(){j(function(){this.refresh()})});this.on("destroy",function(){j(function(){this.destroy()});delete this.indicators})},_initWheel:function(){g.addEvent(this.wrapper,"wheel",this);g.addEvent(this.wrapper,"mousewheel",this);g.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){g.removeEvent(this.wrapper,"wheel",this);g.removeEvent(this.wrapper,"mousewheel",this);g.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(n){if(!this.enabled){return}n.preventDefault();n.stopPropagation();var l,k,o,m,j=this;if(this.wheelTimeout===undefined){j._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){j._execEvent("scrollEnd");j.wheelTimeout=undefined},400);if("deltaX" in n){l=-n.deltaX;k=-n.deltaY}else{if("wheelDeltaX" in n){l=n.wheelDeltaX/120*this.options.mouseWheelSpeed;k=n.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in n){l=k=n.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in n){l=k=-n.detail/3*this.options.mouseWheelSpeed}else{return}}}}l*=this.options.invertWheelDirection;k*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){l=k;k=0}if(this.options.snap){o=this.currentPage.pageX;m=this.currentPage.pageY;if(l>0){o--}else{if(l<0){o++}}if(k>0){m--}else{if(k<0){m++}}this.goToPage(o,m);return}o=this.x+b.round(this.hasHorizontalScroll?l:0);m=this.y+b.round(this.hasVerticalScroll?k:0);if(o>0){o=0}else{if(o<this.maxScrollX){o=this.maxScrollX}}if(m>0){m=0}else{if(m<this.maxScrollY){m=this.maxScrollY}}this.scrollTo(o,m,0)},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var s=0,q,o=0,k,r,p,u=0,t,w=this.options.snapStepX||this.wrapperWidth,v=this.options.snapStepY||this.wrapperHeight,j;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){r=b.round(w/2);p=b.round(v/2);while(u>-this.scrollerWidth){this.pages[s]=[];q=0;t=0;while(t>-this.scrollerHeight){this.pages[s][q]={x:b.max(u,this.maxScrollX),y:b.max(t,this.maxScrollY),width:w,height:v,cx:u-r,cy:t-p};t-=v;q++}u-=w;s++}}else{j=this.options.snap;q=j.length;k=-1;for(;s<q;s++){if(s===0||j[s].offsetLeft<=j[s-1].offsetLeft){o=0;k++}if(!this.pages[o]){this.pages[o]=[]}u=b.max(-j[s].offsetLeft,this.maxScrollX);t=b.max(-j[s].offsetTop,this.maxScrollY);r=u-b.round(j[s].offsetWidth/2);p=t-b.round(j[s].offsetHeight/2);this.pages[o][k]={x:u,y:t,width:j[s].offsetWidth,height:j[s].offsetHeight,cx:r,cy:p};if(u>this.maxScrollX){o++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=b.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=b.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var j=this.options.snapSpeed||b.max(b.max(b.min(b.abs(this.x-this.startX),1000),b.min(b.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,j)})},_nearestSnap:function(k,p){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var o=0,n=this.pages.length,j=0;if(b.abs(k-this.absStartX)<this.snapThresholdX&&b.abs(p-this.absStartY)<this.snapThresholdY){return this.currentPage}if(k>0){k=0}else{if(k<this.maxScrollX){k=this.maxScrollX}}if(p>0){p=0}else{if(p<this.maxScrollY){p=this.maxScrollY}}for(;o<n;o++){if(k>=this.pages[o][0].cx){k=this.pages[o][0].x;break}}n=this.pages[o].length;for(;j<n;j++){if(p>=this.pages[0][j].cy){p=this.pages[0][j].y;break}}if(o==this.currentPage.pageX){o+=this.directionX;if(o<0){o=0}else{if(o>=this.pages.length){o=this.pages.length-1}}k=this.pages[o][0].x}if(j==this.currentPage.pageY){j+=this.directionY;if(j<0){j=0}else{if(j>=this.pages[0].length){j=this.pages[0].length-1}}p=this.pages[0][j].y}return{x:k,y:p,pageX:o,pageY:j}},goToPage:function(j,o,k,n){n=n||this.options.bounceEasing;if(j>=this.pages.length){j=this.pages.length-1}else{if(j<0){j=0}}if(o>=this.pages[j].length){o=this.pages[j].length-1}else{if(o<0){o=0}}var m=this.pages[j][o].x,l=this.pages[j][o].y;k=k===undefined?this.options.snapSpeed||b.max(b.max(b.min(b.abs(m-this.x),1000),b.min(b.abs(l-this.y),1000)),300):k;this.currentPage={x:m,y:l,pageX:j,pageY:o};this.scrollTo(m,l,k,n)},next:function(k,m){var j=this.currentPage.pageX,l=this.currentPage.pageY;j++;if(j>=this.pages.length&&this.hasVerticalScroll){j=0;l++}this.goToPage(j,l,k,m)},prev:function(k,m){var j=this.currentPage.pageX,l=this.currentPage.pageY;j--;if(j<0&&this.hasVerticalScroll){j=0;l--}this.goToPage(j,l,k,m)},_initKeys:function(l){var k={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var j;if(typeof this.options.keyBindings=="object"){for(j in this.options.keyBindings){if(typeof this.options.keyBindings[j]=="string"){this.options.keyBindings[j]=this.options.keyBindings[j].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(j in k){this.options.keyBindings[j]=this.options.keyBindings[j]||k[j]}g.addEvent(e,"keydown",this);this.on("destroy",function(){g.removeEvent(e,"keydown",this)})},_key:function(o){if(!this.enabled){return}var j=this.options.snap,p=j?this.currentPage.pageX:this.x,n=j?this.currentPage.pageY:this.y,l=g.getTime(),k=this.keyTime||0,m=0.25,q;if(this.options.useTransition&&this.isInTransition){q=this.getComputedPosition();this._translate(b.round(q.x),b.round(q.y));this.isInTransition=false}this.keyAcceleration=l-k<200?b.min(this.keyAcceleration+m,50):0;switch(o.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){p+=j?1:this.wrapperWidth}else{n+=j?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){p-=j?1:this.wrapperWidth}else{n-=j?1:this.wrapperHeight}break;case this.options.keyBindings.end:p=j?this.pages.length-1:this.maxScrollX;n=j?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:p=0;n=0;break;case this.options.keyBindings.left:p+=j?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=j?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:p-=j?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=j?1:5+this.keyAcceleration>>0;break;default:return}if(j){this.goToPage(p,n);return}if(p>0){p=0;this.keyAcceleration=0}else{if(p<this.maxScrollX){p=this.maxScrollX;this.keyAcceleration=0}}if(n>0){n=0;this.keyAcceleration=0}else{if(n<this.maxScrollY){n=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(p,n,0);this.keyTime=l},_animate:function(s,r,m,j){var p=this,o=this.x,n=this.y,k=g.getTime(),q=k+m;function l(){var t=g.getTime(),v,u,w;if(t>=q){p.isAnimating=false;p._translate(s,r);if(!p.resetPosition(p.options.bounceTime)){p._execEvent("scrollEnd")}return}t=(t-k)/m;w=j(t);v=(s-o)*w+o;u=(r-n)*w+n;p._translate(v,u);if(p.isAnimating){a(l)}}this.isAnimating=true;l()},handleEvent:function(j){switch(j.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(j);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(j);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(j);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(j);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(j);break;case"keydown":this._key(j);break;case"click":if(!j._constructed){j.preventDefault();j.stopPropagation()}break}}};function c(m,k,l){var n=f.createElement("div"),j=f.createElement("div");if(l===true){n.style.cssText="position:absolute;z-index:9999";j.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}j.className="iScrollIndicator";if(m=="h"){if(l===true){n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";j.style.height="100%"}n.className="iScrollHorizontalScrollbar"}else{if(l===true){n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";j.style.width="100%"}n.className="iScrollVerticalScrollbar"}n.style.cssText+=";overflow:hidden";if(!k){n.style.pointerEvents="none"}n.appendChild(j);return n}function i(j,k){this.wrapper=typeof k.el=="string"?f.querySelector(k.el):k.el;this.wrapperStyle=this.wrapper.style;var m=arguments[2]?arguments[2]:0;this.indicator=this.wrapper.children[m];this.indicatorStyle=this.indicator.style;this.scroller=j;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var l in k){this.options[l]=k[l]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){g.addEvent(this.indicator,"touchstart",this);g.addEvent(e,"touchend",this)}if(!this.options.disablePointer){g.addEvent(this.indicator,g.prefixPointerEvent("pointerdown"),this);g.addEvent(e,g.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){g.addEvent(this.indicator,"mousedown",this);g.addEvent(e,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[g.style.transform]=this.scroller.translateZ;this.wrapperStyle[g.style.transitionDuration]=g.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}i.prototype={handleEvent:function(j){switch(j.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(j);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(j);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(j);break}},destroy:function(){if(this.options.interactive){g.removeEvent(this.indicator,"touchstart",this);g.removeEvent(this.indicator,g.prefixPointerEvent("pointerdown"),this);g.removeEvent(this.indicator,"mousedown",this);g.removeEvent(e,"touchmove",this);g.removeEvent(e,g.prefixPointerEvent("pointermove"),this);g.removeEvent(e,"mousemove",this);g.removeEvent(e,"touchend",this);g.removeEvent(e,g.prefixPointerEvent("pointerup"),this);g.removeEvent(e,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(k){var j=k.touches?k.touches[0]:k;k.preventDefault();k.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=j.pageX;this.lastPointY=j.pageY;this.startTime=g.getTime();if(!this.options.disableTouch){g.addEvent(e,"touchmove",this)}if(!this.options.disablePointer){g.addEvent(e,g.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){g.addEvent(e,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(o){var k=o.touches?o.touches[0]:o,l,j,p,n,m=g.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;l=k.pageX-this.lastPointX;this.lastPointX=k.pageX;j=k.pageY-this.lastPointY;this.lastPointY=k.pageY;p=this.x+l;n=this.y+j;this._pos(p,n);o.preventDefault();o.stopPropagation()},_end:function(l){if(!this.initiated){return}this.initiated=false;l.preventDefault();l.stopPropagation();g.removeEvent(e,"touchmove",this);g.removeEvent(e,g.prefixPointerEvent("pointermove"),this);g.removeEvent(e,"mousemove",this);if(this.scroller.options.snap){var j=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var k=this.options.snapSpeed||b.max(b.max(b.min(b.abs(this.scroller.x-j.x),1000),b.min(b.abs(this.scroller.y-j.y),1000)),300);if(this.scroller.x!=j.x||this.scroller.y!=j.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=j;this.scroller.scrollTo(j.x,j.y,k,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(j){j=j||0;this.indicatorStyle[g.style.transitionDuration]=j+"ms";if(!j&&g.isBadAndroid){this.indicatorStyle[g.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(j){this.indicatorStyle[g.style.transitionTimingFunction]=j},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){g.addClass(this.wrapper,"iScrollBothScrollbars");g.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{g.removeClass(this.wrapper,"iScrollBothScrollbars");g.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}var j=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=b.max(b.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=b.max(b.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var j=this.options.listenX&&b.round(this.sizeRatioX*this.scroller.x)||0,k=this.options.listenY&&b.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(j<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=b.max(this.indicatorWidth+j,8);this.indicatorStyle.width=this.width+"px"}j=this.minBoundaryX}else{if(j>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=b.max(this.indicatorWidth-(j-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";j=this.maxPosX+this.indicatorWidth-this.width}else{j=this.maxBoundaryX}}else{if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(k<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=b.max(this.indicatorHeight+k*3,8);this.indicatorStyle.height=this.height+"px"}k=this.minBoundaryY}else{if(k>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=b.max(this.indicatorHeight-(k-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";k=this.maxPosY+this.indicatorHeight-this.height}else{k=this.maxBoundaryY}}else{if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=j;this.y=k;if(this.scroller.options.useTransform){this.indicatorStyle[g.style.transform]="translate("+j+"px,"+k+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=j+"px";this.indicatorStyle.top=k+"px"}},_pos:function(j,k){if(j<0){j=0}else{if(j>this.maxPosX){j=this.maxPosX}}if(k<0){k=0}else{if(k>this.maxPosY){k=this.maxPosY}}j=this.options.listenX?b.round(j/this.sizeRatioX):this.scroller.x;k=this.options.listenY?b.round(k/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(j,k)},fade:function(m,l){if(l&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var k=m?250:500,j=m?0:300;m=m?"1":"0";this.wrapperStyle[g.style.transitionDuration]=k+"ms";this.fadeTimeout=setTimeout((function(n){this.wrapperStyle.opacity=n;this.visible=+n}).bind(this,m),j)}};d.utils=g;var h=function(){this.scrollObj={};var k=e.navigator.userAgent.toLowerCase();this.click=j();function j(){if(/iphone|ipad|ipod|macintosh/i.test(k)){return true}if(/samsung/i.test(k)){return true}if(/chrome/i.test(k)){return(/android/i.test(k))}if(/ucbrowser/i.test(k)){if(/cmcc/i.test(k)){return true}var l=k.substr(k.indexOf("ucbrowser/")+10,4).split(".");return parseFloat(l[0]+l[1])<98?false:true}if(/h60/i.test(k)){return false}if(/silk/i.test(k)){return false}if(/android/i.test(k)){var m=k.substr(k.indexOf("android")+8,3);if(parseFloat(m[0]+m[2])>=44){return true}if(/MQQBrowser/i.test(k)){return true}if(parseFloat(m[0]+m[2])==41){return true}return false}}};h.prototype={init:function(k){for(var l in k){var p=f.querySelector(k[l]);if(!p){return}var n=0;var m=p.children;if(m.length>1){for(var j in m){if(m[j].style.display!="none"){n=j;break}}}this.scrollObj[k[l]]=new d(k[l],{click:this.click,bindToWrapper:true},n)}},has:function(j){return this.scrollObj.hasOwnProperty(j)},to:function(l,j,m,k){if(!k){k=0}this.scrollObj[l].scrollTo(j,m,k)},refresh:function(n){if(this.has(n)){var m=f.querySelector(n).children;if(m.length>1){var l=-1;for(var j in m){if(m[j].style.display!="none"){l=j;break}}if(l!=-1){this.scrollObj[n].destroy();this.scrollObj[n]=null;this.scrollObj[n]=new d(n,{click:this.click,bindToWrapper:true},l)}}else{this.scrollObj[n].refresh();var k=0;if(typeof position=="string"){k=this.scrollObj[n].y}else{if(typeof position!="undefined"&&!isNaN(position)){k=position}}this.scrollObj[n].scrollTo(0,k)}}else{this.init([n])}}};return new h});