define("toast",[],function(t){"use strict";$.Toast=function(t,o,e,s,a){function n(){$.Toast.remove(i,a)}e=e||"success","function"==typeof s&&(a=s),"function"==typeof e&&(a=e,e="success");var i=null,d=$.extend(!0,{},{appendTo:"body",stack:!1,position_class:"toast-top-right",fullscreen:!1,width:250,spacing:20,timeout:2e3,has_close_btn:!0,has_icon:!0,sticky:!1,border_radius:6,has_progress:!1,rtl:!1},s),l=d.spacing,r={position:"body"==d.appendTo?"fixed":"absolute","min-width":d.width,display:"none","border-radius":d.border_radius,"z-index":99999};if(i=$('<div class="toast-item-wrapper '+e+" "+d.position_class+'"></div>'),$('<p class="toast-title">'+t+"</p>").appendTo(i),$('<p class="toast-message">'+o+"</p>").appendTo(i),d.fullscreen&&i.addClass("fullscreen"),d.rtl&&i.addClass("rtl"),d.has_close_btn&&($('<span class="toast-close">&times;</span>').appendTo(i),d.rtl?r["padding-left"]=20:r["padding-right"]=20),d.has_icon&&($('<i class="toast-icon toast-icon-'+e+'"></i>').appendTo(i),d.rtl?r["padding-right"]=50:r["padding-left"]=50),d.has_progress&&d.timeout>0&&$('<div class="toast-progress"></div>').appendTo(i),d.sticky)switch(d.spacing=0,l=0,d.position_class){case"toast-top-left":case"toast-top-right":r.top=0,r.left=0;break;case"toast-top-center":r.top=0,r.left=r.right=0,r.width="100%";break;case"toast-bottom-left":r.bottom=0,r.left=0;break;case"toast-bottom-right":r.bottom=0,r.right=0;break;case"toast-bottom-center":r.bottom=0,r.left=r.right=0,r.width="100%"}return d.stack&&(-1!==d.position_class.indexOf("toast-top")?$(d.appendTo).find(".toast-item-wrapper").each(function(){r.top=parseInt($(this).css("top"))+this.offsetHeight+l}):-1!==d.position_class.indexOf("toast-bottom")&&$(d.appendTo).find(".toast-item-wrapper").each(function(){r.bottom=parseInt($(this).css("bottom"))+this.offsetHeight+l})),i.css(r),i.appendTo(d.appendTo),i.fadeIn?i.fadeIn():$alert.css({display:"block",opacity:1}),d.timeout>0&&(setTimeout(n,d.timeout),d.has_progress&&$(".toast-progress",i).animate({width:"100%"},d.timeout)),$(".toast-close",i).click(n),i},$.Toast.remove=function(t,o){t.fadeOut?t.fadeOut(function(){t.remove(),o&&o()}):(t.remove(),o&&o())}}),define("entry/upload",["toast"],function(t){function o(){$(".upload-content").removeClass("upload").addClass("select"),$("#upload-tip").hide(),$("#btn-select").removeClass("none"),$("#btn-upload").addClass("none"),$("#btn-upload").data("disable","false").text("\u70b9\u6211\u4e0a\u4f20"),$(".upload-btn").attr("style",""),a.value=""}function e(t){var e=new FormData(t);$.ajax({url:s.domainUp,type:"POST",data:e,processData:!1,contentType:!1,xhr:function(){var t=$.ajaxSettings.xhr();if(t.upload){var o=$(".upload-btn");t.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;console.log("\u4e0a\u4f20\uff1a + "+t.loaded+" + / + "+t.total+" +  bytes.  +\n                                "+e.toFixed(2)+" + %"),o.css("backgroundPosition","0 "+e.toFixed(2)+"%")}},!1)}return t},success:function(t){"100"===t.code?($("#btn-upload").addClass("none"),$("#btn-done").removeClass("none"),$(".upload-content").removeClass("upload").addClass("done"),$.Toast("\u6210\u529f",t.msg,"success",{timeout:0})):(console.log(t.data),$.Toast("\u5931\u8d25",t.msg,"error",function(){o()}))},error:function(t){var e=JSON.stringify(t);console.log("\u5931\u8d25:"+e),$.Toast("\u5931\u8d25",e,"error",function(){o()})}})}var s=window.vars;s.upDomain;t("toast"),window.onload=function(){$(".upload-content").addClass("select")};var a=document.getElementById("selectFile");a&&a.addEventListener("change",function(t){var o=document.getElementById("form"),s=t.target.files[0];if(s){var a=s.name,n=s.size/1e3;/.\.txt$/.test(a)?($("#upload-tip").html("<p>\u6587\u4ef6\u540d\uff1a"+a+"</p><p>\u5c3a\u5bf8\uff1a"+n+"kb</p>").show(),$(".upload-content").removeClass("select").addClass("upload"),$("#btn-select").addClass("none"),$("#btn-upload").removeClass("none").off("click").on("click",function(){"true"!==$(this).data("disable")&&($(this).data("disable","true").text("\u4e0a\u4f20\u4e2d"),e(o))})):$.Toast("\u4e0a\u4f20\u5931\u8d25","\u76ee\u524d\u53ea\u80fd\u4e0a\u4f20txt\u683c\u5f0f\u6587\u6863","error",{timeout:1200})}},!1)});
//# sourceMappingURL=../maps/entry/upload.js.map?_f6bnf9mbcno
