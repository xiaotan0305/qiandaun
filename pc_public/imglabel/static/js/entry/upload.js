define("toast",[],function(t){"use strict";$.Toast=function(t,o,e,s,a){function n(){$.Toast.remove(d,a)}var i={appendTo:"body",stack:!1,position_class:"toast-top-right",fullscreen:!1,width:250,spacing:20,timeout:2e3,has_close_btn:!0,has_icon:!0,sticky:!1,border_radius:6,has_progress:!1,rtl:!1};e=e||"success","function"==typeof s&&(a=s),"function"==typeof e&&(a=e,e="success");var d=null,l=$.extend(!0,{},i,s),r=l.spacing,c={position:"body"==l.appendTo?"fixed":"absolute","min-width":l.width,display:"none","border-radius":l.border_radius,"z-index":99999};if(d=$('<div class="toast-item-wrapper '+e+" "+l.position_class+'"></div>'),$('<p class="toast-title">'+t+"</p>").appendTo(d),$('<p class="toast-message">'+o+"</p>").appendTo(d),l.fullscreen&&d.addClass("fullscreen"),l.rtl&&d.addClass("rtl"),l.has_close_btn&&($('<span class="toast-close">&times;</span>').appendTo(d),l.rtl?c["padding-left"]=20:c["padding-right"]=20),l.has_icon&&($('<i class="toast-icon toast-icon-'+e+'"></i>').appendTo(d),l.rtl?c["padding-right"]=50:c["padding-left"]=50),l.has_progress&&l.timeout>0&&$('<div class="toast-progress"></div>').appendTo(d),l.sticky)switch(l.spacing=0,r=0,l.position_class){case"toast-top-left":case"toast-top-right":c.top=0,c.left=0;break;case"toast-top-center":c.top=0,c.left=c.right=0,c.width="100%";break;case"toast-bottom-left":c.bottom=0,c.left=0;break;case"toast-bottom-right":c.bottom=0,c.right=0;break;case"toast-bottom-center":c.bottom=0,c.left=c.right=0,c.width="100%"}return l.stack&&(-1!==l.position_class.indexOf("toast-top")?$(l.appendTo).find(".toast-item-wrapper").each(function(){c.top=parseInt($(this).css("top"))+this.offsetHeight+r}):-1!==l.position_class.indexOf("toast-bottom")&&$(l.appendTo).find(".toast-item-wrapper").each(function(){c.bottom=parseInt($(this).css("bottom"))+this.offsetHeight+r})),d.css(c),d.appendTo(l.appendTo),d.fadeIn?d.fadeIn():$alert.css({display:"block",opacity:1}),l.timeout>0&&(setTimeout(n,l.timeout),l.has_progress&&$(".toast-progress",d).animate({width:"100%"},l.timeout)),$(".toast-close",d).click(n),d},$.Toast.remove=function(t,o){t.fadeOut?t.fadeOut(function(){t.remove(),o&&o()}):(t.remove(),o&&o())}}),define("entry/upload",["toast"],function(t){function o(){$(".upload-content").removeClass("upload").addClass("select"),$("#upload-tip").hide(),$("#btn-select").removeClass("none"),$("#btn-upload").addClass("none"),$("#btn-upload").data("disable","false").text("\u70b9\u6211\u4e0a\u4f20"),$(".upload-btn").attr("style",""),a.value=""}function e(t){var e=new FormData(t);$.ajax({url:s.domainUp,type:"POST",data:e,processData:!1,contentType:!1,xhr:function(){var t=$.ajaxSettings.xhr();if(t.upload){var o=$(".upload-btn");t.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;console.log("\u4e0a\u4f20\uff1a + "+t.loaded+" + / + "+t.total+" +  bytes.  +\n                                "+e.toFixed(2)+" + %"),o.css("backgroundPosition","0 "+e.toFixed(2)+"%")}},!1)}return t},success:function(t){"100"===t.code?($("#btn-upload").addClass("none"),$("#btn-done").removeClass("none"),$(".upload-content").removeClass("upload").addClass("done"),$.Toast("\u6210\u529f",t.msg,"success",{timeout:0})):(console.log(t.data),$.Toast("\u5931\u8d25",t.msg,"error",function(){o()}))},error:function(t){var e=JSON.stringify(t);console.log("\u5931\u8d25:"+e),$.Toast("\u5931\u8d25",e,"error",function(){o()})}})}var s=window.vars;s.upDomain;t("toast"),window.onload=function(){$(".upload-content").addClass("select")};var a=document.getElementById("selectFile");a&&a.addEventListener("change",function(t){var o=document.getElementById("form"),s=t.target.files[0];if(s){var a=s.name,n=s.size/1e3;/.\.txt$/.test(a)?($("#upload-tip").html("<p>\u6587\u4ef6\u540d\uff1a"+a+"</p><p>\u5c3a\u5bf8\uff1a"+n+"kb</p>").show(),$(".upload-content").removeClass("select").addClass("upload"),$("#btn-select").addClass("none"),$("#btn-upload").removeClass("none").off("click").on("click",function(){"true"!==$(this).data("disable")&&($(this).data("disable","true").text("\u4e0a\u4f20\u4e2d"),e(o))})):$.Toast("\u4e0a\u4f20\u5931\u8d25","\u76ee\u524d\u53ea\u80fd\u4e0a\u4f20txt\u683c\u5f0f\u6587\u6863","error",{timeout:1200})}},!1)});
//# sourceMappingURL=../maps/entry/upload.js.map?_qpc873l07m8
