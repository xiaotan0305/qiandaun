{"version":3,"sources":["entry/login.js"],"names":["define","require","$","Toast","title","message","type","options","callback","removeToast","remove","$element","defaultOptions","appendTo","stack","position_class","fullscreen","width","spacing","timeout","has_close_btn","has_icon","sticky","border_radius","has_progress","rtl","$options","extend","css","position","min-width","display","border-radius","z-index","addClass","indexOf","find","each","parseInt","this","offsetHeight","fadeIn","$alert","opacity","setTimeout","animate","click","fadeOut","vars","window","loginDomain","console","log","$pwd","on","ev","keyCode","preventDefault","trigger","pwd","val","ajax","url","domainLogin","data","done","res","code","msg","location","href","decodeURIComponent","burl"],"mappings":"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","file":"../../entry/login.js","sourcesContent":["define('toast', [], function (require) {\n    \"use strict\";\n\n    $.Toast = function (title, message, type, options, callback) {\n        var defaultOptions = {\n            appendTo: \"body\",\n            stack: false,\n            position_class: \"toast-top-right\",\n            fullscreen: false,\n            width: 250,\n            spacing: 20,\n            timeout: 2000,\n            has_close_btn: true,\n            has_icon: true,\n            sticky: false,\n            border_radius: 6,\n            has_progress: false,\n            rtl: false\n        };\n        type = type || 'success';\n        if (typeof options === 'function') {\n            callback = options;\n        }\n        if (typeof type === 'function') {\n            callback = type;\n            type = 'success';\n        }\n        var $element = null;\n\n        var $options = $.extend(true, {}, defaultOptions, options);\n\n        var spacing = $options.spacing;\n\n        var css = {\n            \"position\": $options.appendTo == \"body\" ? \"fixed\" : \"absolute\",\n            \"min-width\": $options.width,\n            \"display\": \"none\",\n            \"border-radius\": $options.border_radius,\n            \"z-index\": 99999\n        };\n\n        $element = $('<div class=\"toast-item-wrapper ' + type + ' ' + $options.position_class + '\"></div>');\n        $('<p class=\"toast-title\">' + title + '</p>').appendTo($element);\n        $('<p class=\"toast-message\">' + message + '</p>').appendTo($element);\n\n        if ($options.fullscreen) {\n            $element.addClass(\"fullscreen\");\n        }\n\n        if ($options.rtl) {\n            $element.addClass(\"rtl\");\n        }\n\n        if ($options.has_close_btn) {\n            $('<span class=\"toast-close\">&times;</span>').appendTo($element);\n            if ($options.rtl) {\n                css[\"padding-left\"] = 20;\n            } else {\n                css[\"padding-right\"] = 20;\n            }\n        }\n\n        if ($options.has_icon) {\n            $('<i class=\"toast-icon toast-icon-' + type + '\"></i>').appendTo($element);\n            if ($options.rtl) {\n                css[\"padding-right\"] = 50;\n            } else {\n                css[\"padding-left\"] = 50;\n            }\n        }\n\n        if ($options.has_progress && $options.timeout > 0) {\n            $('<div class=\"toast-progress\"></div>').appendTo($element);\n        }\n\n        if ($options.sticky) {\n            $options.spacing = 0;\n            spacing = 0;\n\n            switch ($options.position_class) {\n                case \"toast-top-left\":\n                    {\n                        css[\"top\"] = 0;\n                        css[\"left\"] = 0;\n                        break;\n                    }\n                case \"toast-top-right\":\n                    {\n                        css[\"top\"] = 0;\n                        css[\"left\"] = 0;\n                        break;\n                    }\n                case \"toast-top-center\":\n                    {\n                        css[\"top\"] = 0;\n                        css[\"left\"] = css[\"right\"] = 0;\n                        css[\"width\"] = \"100%\";\n                        break;\n                    }\n                case \"toast-bottom-left\":\n                    {\n                        css[\"bottom\"] = 0;\n                        css[\"left\"] = 0;\n                        break;\n                    }\n                case \"toast-bottom-right\":\n                    {\n                        css[\"bottom\"] = 0;\n                        css[\"right\"] = 0;\n                        break;\n                    }\n                case \"toast-bottom-center\":\n                    {\n                        css[\"bottom\"] = 0;\n                        css[\"left\"] = css[\"right\"] = 0;\n                        css[\"width\"] = \"100%\";\n                        break;\n                    }\n                default:\n                    {\n                        break;\n                    }\n            }\n        }\n\n        if ($options.stack) {\n            if ($options.position_class.indexOf(\"toast-top\") !== -1) {\n                $($options.appendTo).find('.toast-item-wrapper').each(function () {\n                    css[\"top\"] = parseInt($(this).css(\"top\")) + this.offsetHeight + spacing;\n                });\n            } else if ($options.position_class.indexOf(\"toast-bottom\") !== -1) {\n                $($options.appendTo).find('.toast-item-wrapper').each(function () {\n                    css[\"bottom\"] = parseInt($(this).css(\"bottom\")) + this.offsetHeight + spacing;\n                });\n            }\n        }\n\n        $element.css(css);\n\n        $element.appendTo($options.appendTo);\n\n        if ($element.fadeIn) {\n            $element.fadeIn();\n        } else {\n            $alert.css({ display: 'block', opacity: 1 });\n        }\n\n        function removeToast() {\n            $.Toast.remove($element, callback);\n        }\n\n        if ($options.timeout > 0) {\n            setTimeout(removeToast, $options.timeout);\n            if ($options.has_progress) {\n                $(\".toast-progress\", $element).animate({ \"width\": \"100%\" }, $options.timeout);\n            }\n        }\n\n        $(\".toast-close\", $element).click(removeToast);\n\n        return $element;\n    };\n\n    $.Toast.remove = function ($element, callback) {\n        \"use strict\";\n\n        if ($element.fadeOut) {\n            $element.fadeOut(function () {\n                $element.remove();\n                callback && callback();\n            });\n        } else {\n            $element.remove();\n            callback && callback();\n        }\n    };\n});\ndefine('entry/login', ['toast'], function (require) {\n\n    var vars = window.vars;\n    var loginDomain = vars.loginDomain;\n\n    require('toast');\n\n    console.log('hello login~');\n\n    var $pwd = $('#pwd');\n    $pwd.on('keydown keyup', function (ev) {\n        if (ev.keyCode === 13) {\n            ev.preventDefault();\n            return $('#login').trigger('click');\n        }\n    });\n\n    $('#login').on('click', function () {\n        var pwd = $pwd.val();\n        if (!pwd) {\n            $.Toast('错误', '请输入密码', 'error');\n            return false;\n        }\n        $.ajax({\n            url: vars.domainLogin,\n            type: 'post',\n            data: { pwd: pwd }\n        }).done(function (res) {\n            if (res.code === '100') {\n                $.Toast('提示', res.msg, 'success', function () {\n                    location.href = decodeURIComponent(res.burl);\n                });\n            } else {\n                $.Toast('错误', res.msg, 'error');\n            }\n        });\n    });\n});"]}