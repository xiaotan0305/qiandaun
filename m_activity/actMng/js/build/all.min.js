function pickerDateRange(t,e){var a={aToday:"aToday",aYesterday:"aYesterday",aRecent7Days:"aRecent7Days",aRecent14Days:"aRecent14Days",aRecent30Days:"aRecent30Days",aRecent90Days:"aRecent90Days",startDate:"",endDate:"",startCompareDate:"",endCompareDate:"",minValidDate:"315507600",maxValidDate:"",startDateId:"startDate",startCompareDateId:"startCompareDate",endDateId:"endDate",endCompareDateId:"endCompareDate",target:"",needCompare:!1,suffix:"",inputTrigger:"input_trigger",compareTrigger:"compare_trigger",compareCheckboxId:"needCompare",calendars:2,dayRangeMax:0,monthRangeMax:12,dateTable:"dateRangeDateTable",selectCss:"dateRangeSelected",compareCss:"dateRangeCompare",coincideCss:"dateRangeCoincide",firstCss:"first",lastCss:"last",clickCss:"today",disableGray:"dateRangeGray",isToday:"dateRangeToday",joinLineId:"joinLine",isSingleDay:!1,defaultText:" 至 ",singleCompare:!1,stopToday:!0,isTodayValid:!1,weekendDis:!1,disCertainDay:[],disCertainDate:[],shortOpr:!1,noCalendar:!1,theme:"ta",magicSelect:!1,autoCommit:!1,autoSubmit:!1,replaceBtn:"btn_compare",success:function(t){return!0},clear:function(t){return!0}},s=this;this.inputId=t,this.inputCompareId=t+"Compare",this.compareInputDiv="div_compare_"+t,this.mOpts=$.extend({},a,e),this.mOpts.calendars=Math.min(this.mOpts.calendars,3),this.mOpts.compareCss="ta"==this.mOpts.theme?this.mOpts.selectCss:this.mOpts.compareCss,this.periodObj={},this.periodObj[s.mOpts.aToday]=0,this.periodObj[s.mOpts.aYesterday]=1,this.periodObj[s.mOpts.aRecent7Days]=6,this.periodObj[s.mOpts.aRecent14Days]=13,this.periodObj[s.mOpts.aRecent30Days]=29,this.periodObj[s.mOpts.aRecent90Days]=89,this.startDefDate="";var i=""==this.mOpts.suffix?(new Date).getTime():this.mOpts.suffix;this.calendarId="calendar_"+i,this.dateListId="dateRangePicker_"+i,this.dateRangeCompareDiv="dateRangeCompareDiv_"+i,this.dateRangeDiv="dateRangeDiv_"+i,this.compareCheckBoxDiv="dateRangeCompareCheckBoxDiv_"+i,this.submitBtn="submit_"+i,this.clearBtn="clear_"+i,this.closeBtn="closeBtn_"+i,this.preMonth="dateRangePreMonth_"+i,this.nextMonth="dateRangeNextMonth_"+i,this.startDateId=this.mOpts.startDateId+"_"+i,this.endDateId=this.mOpts.endDateId+"_"+i,this.compareCheckboxId=this.mOpts.compareCheckboxId+"_"+i,this.startCompareDateId=this.mOpts.startCompareDateId+"_"+i,this.endCompareDateId=this.mOpts.endCompareDateId+"_"+i;var d={gri:['<div id="'+this.calendarId+'" class="gri_dateRangeCalendar">','<table class="gri_dateRangePicker"><tr id="'+this.dateListId+'"></tr></table>','<div class="gri_dateRangeOptions" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="gri_dateRangeInput" id="'+this.dateRangeDiv+'" >','<input type="text" class="gri_dateRangeInput" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span id="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div class="gri_dateRangeInput" id="'+this.dateRangeCompareDiv+'">','<input type="text" class="gri_dateRangeInput" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","<div>",'<input type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="确定" />','&nbsp;<a id="'+this.closeBtn+'" href="javascript:;">关闭</a>',"</div>","</div>","</div>"],ta:['<div id="'+this.calendarId+'" class="ta_calendar ta_calendar2 cf">','<div class="ta_calendar_cont cf" id="'+this.dateListId+'">',"</div>",'<div class="ta_calendar_footer cf" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="frm_msg">','<div id="'+this.dateRangeDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div id="'+this.dateRangeCompareDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","</div>",'<div class="frm_btn">','<a id="aRecent7Days" href="javascript:void(0)"  >最近7天</a>','<a id="aRecent30Days" href="javascript:void(0)"  >最近30天</a>','<a id="'+this.clearBtn+'" href="javascript:void(0)"  >清空</a>','<input class="ta_btn ta_btn_primary" type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="确定" />','<input class="ta_btn" type="button" id="'+this.closeBtn+'" value="取消"/>',"</div>","</div>","</div>"]},r={gri:['<label class="gri_contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="gri_pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>对比',"</label>",'<input type="text" name="'+this.inputCompareId+'" id="'+this.inputCompareId+'" value="" class="gri_date"/>'],ta:['<label class="contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>对比',"</label>",'<div class="ta_date" id="'+this.compareInputDiv+'">','   <span name="dateCompare" id="'+this.inputCompareId+'" class="date_title"></span>','   <a class="opt_sel" id="'+this.mOpts.compareTrigger+'" href="#">','       <i class="i_orderd"></i>',"   </a>","</div>"]};"ta"==this.mOpts.theme?$(r[this.mOpts.theme].join("")).insertAfter($("#div_"+this.inputId)):$(r[this.mOpts.theme].join("")).insertAfter($("#"+this.inputId)),this.mOpts.noCalendar&&($("#"+this.inputId).css("display","none"),$("#"+this.compareCheckboxId).parent().css("display","none")),$(0<$("#appendParent").length?"#appendParent":document.body).append(d[this.mOpts.theme].join("")),$("#"+this.calendarId).css("z-index",9999),1>$("#"+this.mOpts.startDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startDateId+'" name="'+this.mOpts.startDateId+'" value="'+this.mOpts.startDate+'" />'):$("#"+this.mOpts.startDateId).val(this.mOpts.startDate),1>$("#"+this.mOpts.endDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endDateId+'" name="'+this.mOpts.endDateId+'" value="'+this.mOpts.endDate+'" />'):$("#"+this.mOpts.endDateId).val(this.mOpts.endDate),1>$("#"+this.mOpts.compareCheckboxId).length&&$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="checkbox" id="'+this.mOpts.compareCheckboxId+'" name="'+this.mOpts.compareCheckboxId+'" value="0" style="display:none;" />'),0==this.mOpts.needCompare?($("#"+this.compareInputDiv).css("display","none"),$("#"+this.compareCheckBoxDiv).css("display","none"),$("#"+this.dateRangeCompareDiv).css("display","none"),$("#"+this.compareCheckboxId).attr("disabled",!0),$("#"+this.startCompareDateId).attr("disabled",!0),$("#"+this.endCompareDateId).attr("disabled",!0),$("#"+this.compareCheckboxId).parent().css("display","none"),$("#"+this.mOpts.replaceBtn).length>0&&$("#"+this.mOpts.replaceBtn).hide()):(1>$("#"+this.mOpts.startCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startCompareDateId+'" name="'+this.mOpts.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" />'):$("#"+this.mOpts.startCompareDateId).val(this.mOpts.startCompareDate),1>$("#"+this.mOpts.endCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endCompareDateId+'" name="'+this.mOpts.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" />'):$("#"+this.mOpts.endCompareDateId).val(this.mOpts.endCompareDate),""==this.mOpts.startCompareDate||""==this.mOpts.endCompareDate?($("#"+this.compareCheckboxId).attr("checked",!1),$("#"+this.mOpts.compareCheckboxId).attr("checked",!1)):($("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),this.dateInput=this.startDateId,this.changeInput(this.dateInput),$("#"+this.startDateId).bind("click",function(){return s.endCompareDateId==s.dateInput&&$("#"+s.startCompareDateId).val(s.startDefDate),s.startDefDate="",s.removeCSS(1),s.changeInput(s.startDateId),!1}),$("#"+this.calendarId).bind("click",function(t){t.stopPropagation()}),$("#"+this.startCompareDateId).bind("click",function(){return s.endDateId==s.dateInput&&$("#"+s.startDateId).val(s.startDefDate),s.startDefDate="",s.removeCSS(0),s.changeInput(s.startCompareDateId),!1}),$("#"+this.submitBtn).bind("click",function(){return s.close(1),s.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()}),!1}),$("#"+this.clearBtn).bind("click",function(){return s.close(),s.mOpts.clear(),!1}),$("#"+this.closeBtn).bind("click",function(){return s.close(),!1}),$("#"+this.inputId).bind("click",function(){return s.init(),s.show(!1,s),!1}),$("#"+this.mOpts.inputTrigger).bind("click",function(){return s.init(),s.show(!1,s),!1}),$("#"+this.mOpts.compareTrigger).bind("click",function(){return s.init(!0),s.show(!0,s),!1}),$("#"+this.inputCompareId).bind("click",function(){return s.init(!0),s.show(!0,s),!1}),this.mOpts.singleCompare&&("ta"===this.mOpts.theme?($("#"+s.startDateId).val(s.mOpts.startDate),$("#"+s.endDateId).val(s.mOpts.startDate),$("#"+s.startCompareDateId).val(s.mOpts.startCompareDate),$("#"+s.endCompareDateId).val(s.mOpts.startCompareDate)):($("#"+s.startDateId).val(s.mOpts.startDate),$("#"+s.endDateId).val(s.mOpts.startDate),$("#"+s.startCompareDateId).val(s.mOpts.startCompareDate),$("#"+s.endCompareDateId).val(s.mOpts.startCompareDate),$("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),$("#"+this.dateRangeCompareDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareCheckboxId).bind("click",function(){$("#"+s.inputCompareId).css("display",this.checked?"":"none"),$("#"+s.dateRangeCompareDiv).css("display",this.checked?"":"none"),$("#"+s.compareInputDiv).css("display",this.checked?"":"none"),$("#"+s.startCompareDateId).css("disabled",!this.checked),$("#"+s.endCompareDateId).css("disabled",!this.checked),$("#"+s.mOpts.compareCheckboxId).attr("checked",$("#"+s.compareCheckboxId).attr("checked")),$("#"+s.mOpts.compareCheckboxId).val($("#"+s.compareCheckboxId).attr("checked")?1:0),$("#"+s.compareCheckboxId).attr("checked")?(sDate=s.str2date($("#"+s.startDateId).val()),sTime=sDate.getTime(),eDate=s.str2date($("#"+s.endDateId).val()),eTime=eDate.getTime(),scDate=$("#"+s.startCompareDateId).val(),ecDate=$("#"+s.endCompareDateId).val(),""!=scDate&&""!=ecDate||(ecDate=s.str2date(s.date2ymd(sDate).join("-")),ecDate.setDate(ecDate.getDate()-1),scDate=s.str2date(s.date2ymd(sDate).join("-")),scDate.setDate(scDate.getDate()-(eTime-sTime)/864e5-1),ecDate.getTime()<1e3*s.mOpts.minValidDate&&(scDate=sDate,ecDate=eDate),ecDate.getTime()>=1e3*s.mOpts.minValidDate&&scDate.getTime()<1e3*s.mOpts.minValidDate&&(scDate.setTime(1e3*s.mOpts.minValidDate),scDate=s.str2date(s.date2ymd(scDate).join("-")),ecDate.setDate(scDate.getDate()+(eTime-sTime)/864e5-1)),$("#"+s.startCompareDateId).val(s.formatDate(s.date2ymd(scDate).join("-"))),$("#"+s.endCompareDateId).val(s.formatDate(s.date2ymd(ecDate).join("-")))),s.addCSS(1),s.changeInput(s.startCompareDateId)):(s.removeCSS(1),s.changeInput(s.startDateId)),s.close(1),s.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()})}),this.init(),this.close(1),this.mOpts.replaceBtn&&$("#"+this.mOpts.replaceBtn).length>0&&($("#"+s.compareCheckboxId).hide(),$(".contrast").hide(),$("#"+this.mOpts.replaceBtn).bind("click",function(){var t=this;$("#"+s.compareCheckboxId).attr("checked")?$("#"+s.compareCheckboxId).removeAttr("checked"):$("#"+s.compareCheckboxId).attr("checked","checked"),$("#"+s.compareCheckboxId).click(),$("#"+s.compareCheckboxId).attr("checked")?function(){$("#"+s.compareCheckboxId).removeAttr("checked"),$(".contrast").hide(),$(t).text("按时间对比")}():function(){$("#"+s.compareCheckboxId).attr("checked","checked"),$(".contrast").show(),$(t).text("取消对比")}()})),this.mOpts.autoCommit&&this.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()}),$(document).bind("click",function(){s.close()})}pickerDateRange.prototype.init=function(t){var e=this,a="undefined"!=typeof t?t&&$("#"+e.compareCheckboxId).attr("checked"):$("#"+e.compareCheckboxId).attr("checked");$("#"+this.dateListId).empty();var s=""==this.mOpts.endDate?new Date:this.str2date(this.mOpts.endDate);if(this.calendar_endDate=new Date(s.getFullYear(),s.getMonth()+1,0),this.mOpts.magicSelect&&"ta"==this.mOpts.theme){var i=0;do{var d=null;if(0==i)d=this.fillDate(this.str2date($("#"+this.endDateId).val()).getFullYear(),this.str2date($("#"+this.endDateId).val()).getMonth(),i),$("#"+this.dateListId).append(d);else{d=this.fillDate(this.str2date($("#"+this.startDateId).val()).getFullYear(),this.str2date($("#"+this.startDateId).val()).getMonth(),i);var r="ta"==this.mOpts.theme?$("#"+this.dateListId).find("table").get(0):$("#"+this.dateListId).find("td").get(0);$(r).before(d)}i++}while(i<2);this.calendar_startDate=new Date(this.str2date($("#"+this.startDateId).val()).getFullYear(),this.str2date($("#"+this.startDateId).val()).getMonth(),1)}else{for(var i=0;i<this.mOpts.calendars;i++){var d=null;if("ta"==this.mOpts.theme?d=this.fillDate(s.getFullYear(),s.getMonth(),i):(d=document.createElement("td"),$(d).append(this.fillDate(s.getFullYear(),s.getMonth(),i)),$(d).css("vertical-align","top")),0==i)$("#"+this.dateListId).append(d);else{var r="ta"==this.mOpts.theme?$("#"+this.dateListId).find("table").get(0):$("#"+this.dateListId).find("td").get(0);$(r).before(d)}s.setMonth(s.getMonth()-1,1)}this.calendar_startDate=new Date(s.getFullYear(),s.getMonth()+1,1)}$("#"+this.preMonth).bind("click",function(){return e.calendar_endDate.setMonth(e.calendar_endDate.getMonth()-1,1),e.mOpts.endDate=e.date2ymd(e.calendar_endDate).join("-"),e.init(t),1==e.mOpts.calendars&&(""==$("#"+e.startDateId).val()?e.changeInput(e.startDateId):e.changeInput(e.endDateId)),!1}),$("#"+this.nextMonth).bind("click",function(){return e.calendar_endDate.setMonth(e.calendar_endDate.getMonth()+1,1),e.mOpts.endDate=e.date2ymd(e.calendar_endDate).join("-"),e.init(t),1==e.mOpts.calendars&&(""==$("#"+e.startDateId).val()?e.changeInput(e.startDateId):e.changeInput(e.endDateId)),!1}),this.mOpts.magicSelect&&this.bindChangeForSelect(),this.endDateId!=this.dateInput&&this.endCompareDateId!=this.dateInput&&(a&&"undefined"!=typeof t?this.addCSS(1):this.addCSS(0)),a&&"undefined"!=typeof t?e.addCSS(1):e.addCSS(0),$("#"+e.inputCompareId).css("display",a?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none");for(var n in e.periodObj)$("#"+n).length>0&&($("#"+n).unbind("click"),$("#"+n).bind("click",function(){var t="ta"==e.mOpts.theme?"active":"a";$(this).parent().nextAll().removeClass(t),$(this).parent().prevAll().removeClass(t),$(this).parent().addClass(t);var a=e.getSpecialPeriod(e.periodObj[$(this).attr("id")]);$("#"+e.startDateId).val(e.formatDate(a.otherday)),$("#"+e.endDateId).val(e.formatDate(a.today)),$("#"+e.mOpts.startDateId).val($("#"+e.startDateId).val()),$("#"+e.mOpts.endDateId).val($("#"+e.endDateId).val()),"ta"==e.mOpts.theme?$("#"+e.compareInputDiv).hide():$("#"+e.inputCompareId).css("display","none"),$("#"+e.compareCheckboxId).attr("checked",!1),$("#"+e.mOpts.compareCheckboxId).attr("checked",!1),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),e.close(1),$("#"+e.startCompareDateId).val(""),$("#"+e.endCompareDateId).val(""),$("#"+e.mOpts.startCompareDateId).val(""),$("#"+e.mOpts.endCompareDateId).val(""),$("#"+e.mOpts.compareCheckboxId).val(0),$("#"+e.mOpts.replaceBtn).length>0&&($(".contrast").hide(),$("#"+e.mOpts.replaceBtn).text("按时间对比")),e.mOpts.success({startDate:$("#"+e.mOpts.startDateId).val(),endDate:$("#"+e.mOpts.endDateId).val(),needCompare:$("#"+e.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+e.mOpts.startCompareDateId).val(),endCompareDate:$("#"+e.mOpts.endCompareDateId).val()})}));$(document).bind("click",function(){e.close()}),$("#"+this.inputId).bind("change",function(){""===$(this).val()&&($("#"+e.startDateId).val(""),$("#"+e.endDateId).val(""),$("#"+e.startCompareDateId).val(""),$("#"+e.endCompareDateId).val(""))})},pickerDateRange.prototype.bindChangeForSelect=function(){var t=this,e=function(t,e,a,s){function i(){$("#"+e).removeClass(s)}function d(){$("#"+e).addClass(s)}function r(){return $("#"+e).attr("class")==s}s=s||"open";var n=null,p=500;$("#"+t).click(function(){r()?i():d()}).mouseover(function(){clearTimeout(n)}).mouseout(function(){n=setTimeout(i,p)}),$("#"+a).mouseover(function(){clearTimeout(n)}).mouseout(function(){n=setTimeout(i,p)})};try{$("#"+this.dateListId).find('div[id*="selected"]').each(function(){var a=$(this).attr("id").match(/(\w+)_(\d)/i);if(a){var s=a[1],i=a[2];"yselected"==s?e("_ybtn_"+i,$(this).attr("id"),"_yctn_"+i):"mselected"==s&&e("_mbtn_"+i,$(this).attr("id"),"_mctn_"+i),$(this).find("li a").each(function(){$(this).click(function(){var e=$(this).parents(".select_wrap").attr("id").match(/(\w+)_(\d)/i),a=e[1],s=e[2],i=null;s^!1?("yselected"==a?t.calendar_startDate.setYear(1*$(this).text(),1):(a="mselected")&&t.calendar_startDate.setMonth(1*$(this).text()-1,1),t.mOpts.startDate=t.date2ymd(t.calendar_startDate).join("-"),i=t.fillDate(t.calendar_startDate.getFullYear(),t.calendar_startDate.getMonth(),s)):("yselected"==a?t.calendar_endDate.setYear(1*$(this).text(),1):(a="mselected")&&t.calendar_endDate.setMonth(1*$(this).text()-1,1),t.mOpts.endDate=t.date2ymd(t.calendar_endDate).join("-"),i=t.fillDate(t.calendar_endDate.getFullYear(),t.calendar_endDate.getMonth(),s));var d=$("#"+t.dateListId).find("table").get(1^s);$(d).replaceWith(i),t.removeCSS(0),t.bindChangeForSelect()})})}})}catch(a){window.console&&console.log(a)}},pickerDateRange.prototype.getSpecialPeriod=function(t){var e=this,a=new Date;1==e.mOpts.isTodayValid&&""!=e.mOpts.isTodayValid||2>t?"":a.setTime(a.getTime()-864e5);var s=a.getTime()-24*t*60*60*1e3<1e3*e.mOpts.minValidDate?1e3*e.mOpts.minValidDate:a.getTime()-24*t*60*60*1e3,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();a.setTime(s);var d=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return t==e.periodObj.aYesterday&&(i=d),{today:i,otherday:d}},pickerDateRange.prototype.getCurrentDate=function(){return{startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}},pickerDateRange.prototype.removeCSS=function(t,e){"undefined"==typeof e&&(e=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof t&&(t=0);var a=this.calendar_startDate,s=this.calendar_endDate;this.mOpts.magicSelect&&(a=this.str2date($("#"+this.startDateId).val()),s=this.str2date($("#"+this.endDateId).val()));for(var i=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d="",r=new Date(i);r.getTime()<=s.getTime();r.setDate(r.getDate()+1))d=0==t?this.mOpts.theme+"_"+this.mOpts.selectCss:this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(r).join("-")).removeClass(d),$("#"+this.calendarId+"_"+this.date2ymd(r).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss)},pickerDateRange.prototype.addCSS=function(t,e){"undefined"==typeof e&&(e=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof t&&(t=0);for(var a=this.str2date($("#"+this.startDateId).val()),s=this.str2date($("#"+this.endDateId).val()),i=this.str2date($("#"+this.startCompareDateId).val()),d=this.str2date($("#"+this.endCompareDateId).val()),r=0==t?a:i,n=0==t?s:d,p="",h=new Date(r);h.getTime()<=n.getTime();h.setDate(h.getDate()+1))0==t?(p=this.mOpts.theme+"_"+this.mOpts.selectCss,$("#"+this.calendarId+"_"+this.date2ymd(h).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss),$("#"+this.calendarId+"_"+this.date2ymd(h).join("-")).removeClass(p)):p=this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(h).join("-")).attr("class",p);"ta"==this.mOpts.theme&&($("#"+this.calendarId+"_"+this.date2ymd(new Date(r)).join("-")).removeClass().addClass(this.mOpts.firstCss),$("#"+this.calendarId+"_"+this.date2ymd(new Date(n)).join("-")).removeClass().addClass(this.mOpts.lastCss),r.getTime()==n.getTime()&&$("#"+this.calendarId+"_"+this.date2ymd(new Date(n)).join("-")).removeClass().addClass(this.mOpts.clickCss))},pickerDateRange.prototype.checkDateRange=function(t,e){var a,s=this.str2date(t),i=this.str2date(e),d=s.getTime(),r=i.getTime();if(console.log(r),console.log(d),r>=d)a=this.str2date(t),a.setMonth(a.getMonth()+this.mOpts.monthRangeMax),a.setDate(a.getDate()+this.mOpts.dayRangeMax-1);else if(a=this.str2date(t),a.setMonth(a.getMonth()-this.mOpts.monthRangeMax),a.setDate(a.getDate()-this.mOpts.dayRangeMax+1),a.getTime()>r)return alert("开始日期不能小于："+this.date2ymd(a).join("-")),!1;return!0},pickerDateRange.prototype.selectDate=function(t){this.changeInput(this.dateInput);var e=this.formatDate(t);if(this.startDateId==this.dateInput)this.removeCSS(0),this.removeCSS(1),$("#"+this.calendarId+"_"+t).attr("class","ta"==this.mOpts.theme?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.selectCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(e),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startDateId,$("#"+this.endDateId).val(e),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):this.dateInput=this.endDateId;else if(this.endDateId==this.dateInput){if(""==$("#"+this.startDateId).val())return this.dateInput=this.startDateId,this.selectDate(t),!1;if(0==this.checkDateRange($("#"+this.startDateId).val(),t))return!1;-1==this.compareStrDate(t,$("#"+this.startDateId).val())&&($("#"+this.dateInput).val($("#"+this.startDateId).val()),$("#"+this.startDateId).val(e),e=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(e),this.dateInput=this.startDateId,this.removeCSS(0),this.addCSS(0),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}else if(this.startCompareDateId==this.dateInput)this.removeCSS(1),this.removeCSS(0),$("#"+this.calendarId+"_"+t).attr("class","ta"==this.mOpts.theme?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.compareCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(e),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startCompareDateId,$("#"+this.endCompareDateId).val(e),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):this.dateInput=this.endCompareDateId;else if(this.endCompareDateId==this.dateInput){if(""==$("#"+this.startCompareDateId).val())return this.dateInput=this.startCompareDateId,this.selectDate(t),!1;if(0==this.checkDateRange($("#"+this.startCompareDateId).val(),t))return!1;-1==this.compareStrDate(t,$("#"+this.startCompareDateId).val())&&($("#"+this.dateInput).val($("#"+this.startCompareDateId).val()),$("#"+this.startCompareDateId).val(e),e=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(e),this.dateInput=this.startCompareDateId,this.removeCSS(1),this.addCSS(1),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}},pickerDateRange.prototype.show=function(t,e){$("body").append('<div class="maskTransparent"></div>'),$("#"+e.dateRangeDiv).css("display",t?"none":""),$("#"+e.dateRangeCompareDiv).css("display",t?"":"none");var a=t?$("#"+this.inputCompareId).offset():$("#"+this.inputId).offset(),s=(t?$("#"+this.inputCompareId).height():$("#"+this.inputId).height(),parseInt($(document.body)[0].clientWidth)),i=a.left;return $("#"+this.calendarId).css("display","block"),1!=this.mOpts.singleCompare&&1!=this.mOpts.isSingleDay||($("#"+this.endDateId).css("display","none"),$("#"+this.endCompareDateId).css("display","none")),0<s&&$("#"+this.calendarId).width()+a.left>s&&(i=a.left+$("#"+this.inputId).width()-$("#"+this.calendarId).width()+(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?5:0),"ta"==e.mOpts.theme&&(i+=50)),$("#"+this.calendarId).css("left",i+"px"),$("#"+this.calendarId).css("top",a.top+("ta"==e.mOpts.theme?35:22)+"px"),t?this.changeInput(this.startCompareDateId):this.changeInput(this.startDateId),!1},pickerDateRange.prototype.close=function(t){var e=this;if($(".maskTransparent").remove(),t){this.mOpts.shortOpr===!0?($("#"+this.inputId).val($("#"+this.startDateId).val()),$("#"+this.inputCompareId).val($("#"+this.startCompareDateId).val())):$("#"+this.inputId).val($("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()));var a=1==this.mOpts.isTodayValid&&""!=this.mOpts.isTodayValid?(new Date).getTime():(new Date).getTime()-864e5,s=this.str2date($("#"+this.startDateId).val()).getTime(),i=this.str2date($("#"+this.endDateId).val()).getTime();if(i<s){var d=$("#"+this.startDateId).val();$("#"+this.startDateId).val($("#"+this.endDateId).val()),$("#"+this.endDateId).val(d)}var r=1==this.mOpts.shortOpr?$("#"+this.startDateId).val():$("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()),n=document.getElementById(this.inputId);if(n&&"INPUT"==n.tagName?($("#"+this.inputId).val(r),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).val(o)):($("#"+this.inputId).html(r),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).html(o)),"ta"!=this.mOpts.theme&&""!=$("#"+this.startCompareDateId).val()&&""!=$("#"+this.endCompareDateId).val()){var p=this.str2date($("#"+this.startCompareDateId).val()).getTime(),h=this.str2date($("#"+this.endCompareDateId).val()).getTime(),m=p+i-s;m>a&&(m=a,$("#"+this.startCompareDateId).val(this.formatDate(this.date2ymd(new Date(m+s-i)).join("-")))),$("#"+this.endCompareDateId).val(this.formatDate(this.date2ymd(new Date(m)).join("-")));var p=this.str2date($("#"+this.startCompareDateId).val()).getTime(),h=this.str2date($("#"+this.endCompareDateId).val()).getTime();if(h<p){var d=$("#"+this.startCompareDateId).val();$("#"+this.startCompareDateId).val($("#"+this.endCompareDateId).val()),$("#"+this.endCompareDateId).val(d)}}var o=1==this.mOpts.shortOpr?$("#"+this.startCompareDateId).val():$("#"+this.startCompareDateId).val()+(""==$("#"+this.endCompareDateId).val()?"":this.mOpts.defaultText+$("#"+this.endCompareDateId).val());n&&"INPUT"==n.tagName?$("#"+this.inputCompareId).val(o):$("#"+this.inputCompareId).html(o);$("#"+this.mOpts.startDateId).val($("#"+this.startDateId).val()),$("#"+this.mOpts.endDateId).val($("#"+this.endDateId).val()),$("#"+this.mOpts.startCompareDateId).val($("#"+this.startCompareDateId).val()),$("#"+this.mOpts.endCompareDateId).val($("#"+this.endCompareDateId).val());for(var c in this.periodObj)$("#"+this.mOpts[c])&&$("#"+this.mOpts[c]).parent().removeClass("a")}return $("#"+e.calendarId).css("display","none"),!1},pickerDateRange.prototype.clear=function(t){},pickerDateRange.prototype.fillDate=function(t,e,a){var s=this,i="ta"==this.mOpts.theme,d=new Date(t,e,1),r=new Date(t,e,1),n=r.getDay();r.setDate(1-n);var p=new Date(t,e+1,0),h=new Date(t,e+1,0);n=h.getDay(),h.setDate(h.getDate()+6-n);var m=new Date,o=m.getDate(),c=m.getMonth(),l=m.getFullYear(),D=document.createElement("table");if(i){if(D.className=this.mOpts.dateTable,cap=document.createElement("caption"),this.mOpts.magicSelect){var I=['<div class="select_wrap" id="yselected_'+a+'"><div class="select" id="_ybtn_'+a+'">'+t+'</div><div class="dropdown" id="_yctn_'+a+'"><ul class="list_menu">'],v=['<div class="select_wrap" id="mselected_'+a+'"><div class="select" id="_mbtn_'+a+'">'+(e+1)+'</div><div class="dropdown" id="_mctn_'+a+'"><ul class="list_menu">'];u=1,yt=l;do I.push('<li><a href="javascript:;">'+yt--+"</a></li>"),v.push('<li><a href="javascript:;">'+u++ +"</a></li>");while(u<=12);I.push("</ul></div></div>"),v.push("</ul></div></div>"),$(cap).append(I.join("")+'<span class="joinLine"> 年 </span>'+v.join("")+'<span class="joinLine"> 月 </span>')}else $(cap).append(t+"年"+(e+1)+"月");$(D).append(cap),thead=document.createElement("thead"),tr=document.createElement("tr");for(var C=["日","一","二","三","四","五","六"],u=0;u<7;u++)th=document.createElement("th"),$(th).append(C[u]),$(tr).append(th);$(thead).append(tr),$(D).append(thead),tr=document.createElement("tr"),td=document.createElement("td"),this.mOpts.magicSelect||(0==a&&$(td).append('<a href="javascript:void(0);" id="'+this.nextMonth+'"><i class="i_next"></i></a>'),a+1==this.mOpts.calendars&&$(td).append('<a href="javascript:void(0);" id="'+this.preMonth+'"><i class="i_pre"></i></a>')),$(td).attr("colSpan",7),$(td).css("text-align","center"),$(tr).append(td),$(D).append(tr)}else{D.className=this.mOpts.theme+"_"+this.mOpts.dateTable,tr=document.createElement("tr"),td=document.createElement("td"),0==a&&$(td).append('<a href="javascript:void(0);" id="'+this.nextMonth+'" class="gri_dateRangeNextMonth"><span>next</span></a>'),a+1==this.mOpts.calendars&&$(td).append('<a href="javascript:void(0);" id="'+this.preMonth+'" class="gri_dateRangePreMonth"><span>pre</span></a>'),$(td).append(t+"年"+(e+1)+"月"),$(td).attr("colSpan",7),$(td).css("text-align","center"),$(td).css("background-color","#F9F9F9"),$(tr).append(td),$(D).append(tr);var C=["日","一","二","三","四","五","六"];tr=document.createElement("tr");for(var u=0;u<7;u++)td=document.createElement("td"),$(td).append(C[u]),$(tr).append(td);$(D).append(tr)}for(var O="",g=0,y="",f=r;f.getTime()<=h.getTime();f.setDate(f.getDate()+1)){
if(f.getTime()<d.getTime())O=this.mOpts.theme+"_"+this.mOpts.disableGray,g="-1";else if(f.getTime()>p.getTime())O=this.mOpts.theme+"_"+this.mOpts.disableGray,g="1";else if(1==this.mOpts.stopToday&&f.getTime()>m.getTime()||f.getTime()<1e3*s.mOpts.minValidDate||""!==s.mOpts.maxValidDate&&f.getTime()>1e3*s.mOpts.maxValidDate)O=this.mOpts.theme+"_"+this.mOpts.disableGray,g="2";else{if(g="0",f.getDate()==o&&f.getMonth()==c&&f.getFullYear()==l?1==this.mOpts.isTodayValid?O=this.mOpts.theme+"_"+this.mOpts.isToday:(O=this.mOpts.theme+"_"+this.mOpts.disableGray,g="2"):O="",!this.mOpts.weekendDis||6!=f.getDay()&&0!=f.getDay()||(O=this.mOpts.theme+"_"+this.mOpts.disableGray,g="3"),this.mOpts.disCertainDay&&this.mOpts.disCertainDay.length>0)for(var b in this.mOpts.disCertainDay)isNaN(this.mOpts.disCertainDay[b])||f.getDay()!==this.mOpts.disCertainDay[b]||(O=this.mOpts.theme+"_"+this.mOpts.disableGray,g="4");if(this.mOpts.disCertainDate&&this.mOpts.disCertainDate.length>0){var k=!1;for(var b in this.mOpts.disCertainDate)if(!isNaN(this.mOpts.disCertainDate[b])||isNaN(parseInt(this.mOpts.disCertainDate[b])))if(this.mOpts.disCertainDate[0]===!0){if(k=!(f.getDate()===this.mOpts.disCertainDate[b]),!k)break}else if(k=!(f.getDate()!==this.mOpts.disCertainDate[b]))break;k&&(O=this.mOpts.theme+"_"+this.mOpts.disableGray,g="4")}}0==f.getDay()&&(tr=document.createElement("tr")),td=document.createElement("td"),td.innerHTML=f.getDate(),""!=O&&$(td).attr("class",O),0==g&&(y=f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate(),$(td).attr("id",s.calendarId+"_"+y),$(td).css("cursor","pointer"),function(t){$(td).bind("click",t,function(){return s.selectDate(t),!1})}(y)),$(tr).append(td),6==f.getDay()&&$(D).append(tr)}return D},pickerDateRange.prototype.str2date=function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])},pickerDateRange.prototype.compareStrDate=function(t,e){var a=this.str2date(t),s=this.str2date(e);return a.getTime()>s.getTime()?1:a.getTime()==s.getTime()?0:-1},pickerDateRange.prototype.date2ymd=function(t){return[t.getFullYear(),t.getMonth()+1,t.getDate()]},pickerDateRange.prototype.changeInput=function(t){1==this.mOpts.isSingleDay&&(t=this.startDateId);var e=[this.startDateId,this.startCompareDateId,this.endDateId,this.endCompareDateId],a="";a=t==this.startDateId||t==this.endDateId?this.mOpts.theme+"_"+this.mOpts.selectCss:this.mOpts.theme+"_"+this.mOpts.compareCss,t==this.endDateId&&this.mOpts.singleCompare&&(a=this.mOpts.theme+"_"+this.mOpts.compareCss);for(var s in e)$("#"+e[s]).removeClass(this.mOpts.theme+"_"+this.mOpts.selectCss),$("#"+e[s]).removeClass(this.mOpts.theme+"_"+this.mOpts.compareCss);$("#"+t).addClass(a),$("#"+t).css("background-repeat","repeat"),this.dateInput=t},pickerDateRange.prototype.formatDate=function(t){return t.replace(/(\d{4})\-(\d{1,2})\-(\d{1,2})/g,function(t,e,a,s){return a<10&&(a="0"+a),s<10&&(s="0"+s),e+"-"+a+"-"+s})};
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t;return function e(t,n,o){function i(a,c){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){var o=t("matches-selector");e.exports=function(t,e,n){for(var i=n?t:t.parentNode;i&&i!==document;){if(o(i,e))return i;i=i.parentNode}}},{"matches-selector":5}],2:[function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e,!0),n.delegateTarget&&o.call(t,n)}}var r=t("closest");e.exports=o},{closest:1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],4:[function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!c.string(e))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(t))return i(t,e,n);if(c.nodeList(t))return r(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return s(document.body,t,e,n)}var c=t("./is"),s=t("delegate");e.exports=o},{"./is":3,delegate:2}],5:[function(t,e,n){function o(t,e){if(r)return r.call(t,e);for(var n=t.parentNode.querySelectorAll(e),o=0;o<n.length;++o)if(n[o]==t)return!0;return!1}var i=Element.prototype,r=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=o},{}],6:[function(t,e,n){function o(t){var e;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(t),n.removeAllRanges(),n.addRange(o),e=n.toString()}return e}e.exports=o},{}],7:[function(t,e,n){function o(){}o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;i>o;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,a=o.length;a>r;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},e.exports=o},{}],8:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","select"],r);else if("undefined"!=typeof o)r(n,e("select"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""},t.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},t.prototype.selectFake=function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i["default"])(this.fakeElem),this.copyText()},t.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function(){this.selectedText=(0,i["default"])(this.target),this.copyText()},t.prototype.copyText=function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)},t.prototype.handleResult=function(t){t?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function(){this.removeFake()},a(t,[{key:"action",set:function(){var t=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=c})},{select:6}],9:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if("undefined"!=typeof o)r(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,o){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var l=i(e),u=i(n),f=i(o),d=function(t){function e(n,o){r(this,e);var i=a(this,t.call(this));return i.resolveOptions(o),i.listenClick(n),i}return c(e,t),e.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText},e.prototype.listenClick=function(t){var e=this;this.listener=(0,f["default"])(t,"click",function(t){return e.onClick(t)})},e.prototype.onClick=function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l["default"]({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})},e.prototype.defaultAction=function(t){return s("action",t)},e.prototype.defaultTarget=function(t){var e=s("target",t);return e?document.querySelector(e):void 0},e.prototype.defaultText=function(t){return s("text",t)},e.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(u["default"]);t.exports=d})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)});
var showLoading=function(i,n){var n=n||"",o='<div class="zui_toast '+n+'">'+i+"</div>",t=$(o).appendTo(document.body);t.show(),t.addClass("zui_toast_visible"),$("body").append('<div id="maskTransparent"></div>')},hideLoading=function(i){$("#maskTransparent").remove(),$(".zui_toast_visible").removeClass("zui_toast_visible").transitionEnd(function(){var n=$(this);n.remove(),i&&i(n)})};$.showLoading=function(i,n,o){var t="";if(!i||"加载中"===i){t='<div class="zui_loading"><div class="line-spin-fade-loader">';for(var a=0;a<8;a++)t+="<div></div>";t+="</div></div>"}t+='<p class="zui_toast_content">'+(i||"加载中")+"</p>",showLoading(t,"zui_loading_toast"),n&&setTimeout(function(){$.hideLoading()},o||2e3)},$.hideLoading=function(){hideLoading()},$.fn.transitionEnd=function(i){function n(s){if(s.target===this)for(i.call(this,s),o=0;o<t.length;o++)a.off(t[o],n)}var o,t=["webkitTransitionEnd","transitionend"],a=this;if(i)for(o=0;o<t.length;o++)a.on(t[o],n);return this};
function modal(){this.defaults={title:"提示",text:"",buttonOK:"确定",buttonCancel:"取消",buttons:[{text:"确定",className:"primary"}],autoClose:!0}}function jsonClone(i){return JSON.parse(JSON.stringify(i))}modal.prototype={closeModal:function(i){$("#"+i).removeClass("boxVisible zui_dialog_visible").transitionEnd(function(){$(this).remove()}),$("#mask_"+i).removeClass("maskVisible").transitionEnd(function(){$(this).remove()})},alert:function(i,s,a){var e=this,t=jsonClone(e.defaults);t={title:i,text:s,buttons:[{onClick:a,text:t.buttonOK,className:"primary"}]};var d=t.buttons,o=d.map(function(i,s){return'<a href="javascript:;" class="zui_btn_dialog '+i.className+'">'+i.text+"</a>"}).join(""),l=(new Date).getTime(),n='<div class="zui_dialog" id="'+l+'"><div class="zui_dialog_hd"><strong class="zui_dialog_title">'+i+"</strong></div>"+(s?'<div class="zui_dialog_bd">'+s+"</div>":"")+'<div class="zui_dialog_ft">'+o+"</div></div>",c=$(n);$('<div class="mask" style="z-index:102" id="mask_'+l+'"></div>').appendTo(document.body).show().addClass("maskVisible"),c.appendTo("body").show().addClass("zui_dialog_visible"),c.find(".zui_btn_dialog").each(function(i,s){var a=$(s);a.click(function(){e.closeModal(l),d[i].onClick&&d[i].onClick.call(c)})})},postNew:function(i,s,a,e,t,d,o,l,n,c,p,v,r,u){var m=this;s=s||"",a=a||"",e=e||"",t=t||"",d=d||"",o=o||"",l=l||"",n=n||"",c=c||"",p=p||"",v=v||"";var h="";l&&n&&(h="至");var b="发布";r&&(b="修改");var g='<img src="'+imgUrl+'actMng/images/demoTip.png"/>';u&&(g='<iframe src="'+a+'" width="280" height="498"></iframe>');var f=(new Date).getTime(),x='<div class="itemShowBox addNew" id="'+f+'"><div class="showBoxInner"><div class="showBoxHeader"><h3>输入活动地址：</h3><input type="text" placeholder="活动的正式地址，要带上 http:// 哟" style="width:500px" id="viewURL" value="'+a+'"><span class="btn" id="view">预览</span><span class="btn" style="float:right;cursor:pointer" id="post" data-id="'+r+'">'+b+'</span><span class="closeBtn btn disable">取消</span></div><div class="showBoxBody"><div class="showBox">'+g+'</div><div class="showInfo"><div class="mb1em">活动名称：<input type="" name="" placeholder="活动名称" value="'+s+'" id="actName"></div><div class="showBoxTags mb1em">技术框架：<div class="inputFace">'+e+'<span class="dropInput"><input type="text" id="inputFilter" style="border: 0;height: 18px;margin-right:0;" placeholder="输入或选择"><ul id="labelSelect"></ul></span></div></div><div class="mb1em">产品策划：<input type="" name="" id="pm" style="width:150px;" placeholder="产品经理" value="'+t+'"></div><div class="mb1em">前端开发：<input type="" name="" id="fe" style="width:150px;" placeholder="前端开发" value="'+d+'"><span style="margin-left:1rem;">后台开发：<input type="" name="" id="be" style="width:150px;" placeholder="后台开发" value="'+o+'"></span></div><div class="mb1em">测试地址：<input type="" name="" id="testURL" placeholder="测试地址" style="width:525px" value="'+p+'"></div><div class="mb1em">开发时长：<div class="ta_date"><span class="date_title" id="devTime">'+l+h+n+'</span><a class="opt_sel" id="devTimeTrigger" href="#"><i class="i_orderd"></i></a></div></div><div class="mb1em">上线日期：<div class="ta_date"><span class="date_title" id="pubTime">'+c+'</span><a class="opt_sel" id="pubTimeTrigger" href="#"><i class="i_orderd"></i></a></div></div><div class="infoContent">技术介绍：<textarea name="" id="introduction" style="vertical-align: top;width: 525px" rows="8" placeholder="活动介绍" value="'+v+'"></textarea></div></div></div></div></div>',w=$(x);$('<div class="mask" id="mask_'+f+'"></div>').appendTo(document.body).show().addClass("maskVisible"),w.appendTo("body").show().addClass("boxVisible"),$(".closeBtn,.mask").on("click",function(i){i.stopPropagation(),m.closeModal(f)}),i&&i()},loginBox:function(){var i=this,s=(new Date).getTime(),a='<div class="loginBox" id="'+s+'"><div class="loginHeader"><h2>登录</h2></div><div class="loginBody"><input type="text" name="sfusername" placeholder="用户名"><input type="text" name="sfpassword" placeholder="密码"><div class="forget"><span class="lightBlue">忘记密码？</span></div></div><div class="loginFooter activeBtn">立即登录</div></div>',e=$(a);$('<div class="mask" id="mask_'+s+'"></div>').appendTo(document.body).show().addClass("maskVisible"),e.appendTo("body").show().addClass("boxVisible"),$(".mask").on("click",function(a){a.stopPropagation(),i.closeModal(s)}),$(".forget").find("span").on("click",function(i){i.stopPropagation(),$.showLoading("去找小谭子！",!0)})},prompt:function(i,s,a,e){var t=this,d=jsonClone(t.defaults),o=(new Date).getTime();d={title:i,text:s,buttons:[{onClick:e,text:d.buttonCancel,className:"default"},{onClick:a,text:d.buttonOK,className:"primary"}]};var l=d.buttons,n=l.map(function(i,s){return'<a href="javascript:;" class="zui_btn_dialog '+i.className+'">'+i.text+"</a>"}).join("");s='<p class="zui-prompt-text">'+(d.text||"")+'</p><input type="password" class="zui_input zui-prompt-input" id="zui-prompt-input" value="'+(d.input||"")+'" />';var c='<div class="zui_dialog" id="'+o+'"><div class="zui_dialog_hd"><strong class="zui_dialog_title">'+i+"</strong></div>"+(s?'<div class="zui_dialog_bd">'+s+"</div>":"")+'<div class="zui_dialog_ft">'+n+"</div></div>",p=$(c);$('<div class="mask" id="mask_'+o+'" style="z-index:102"></div>').appendTo(document.body).show().addClass("maskVisible"),p.appendTo("body").show().addClass("zui_dialog_visible boxVisible"),p.find(".zui_btn_dialog").each(function(i,s){var a=$(s);a.click(function(){t.closeModal(o),l[i].onClick&&l[i].onClick.call(p)})})},ItemInfo:function(i,s,a,e,t,d,o,l,n,c,p,v){var r=this,u=(new Date).getTime(),m='<div class="itemShowBox" id="'+u+'"><div class="showBoxInner"><div class="showBoxHeader"><h3>'+i+'</h3><span class="closeBtn">X</span></div><div class="showBoxBody"><div class="showBox"><iframe src="'+s+'" width="280" height="498"></iframe></div><div class="showInfo"><h3>'+i+'</h3><div class="showBoxTags">技术框架：'+a+"</div><p>产品策划："+e+"</p><p>前端开发："+t+"</p><p>后台开发："+d+"</p><p>开发时间："+o+" 至 "+l+"<p>上线日期："+n+"</p><p>测试地址："+c+'<div class="infoContent" style="height: 210px;">技术介绍：'+p+'</div><div class="qrCodeBox"><div class="qrCode"><img src="http://u.fang.com/qrcode.php?url='+v+'&type=market&resize=180"></div><p class="hasClip" data-clipboard-text="'+s+'">蹩说话，点我</p></div></div></div></div></div>',h=$(m);$('<div class="mask" id="mask_'+u+'"></div>').appendTo(document.body).show().addClass("maskVisible"),h.appendTo("body").show().addClass("boxVisible"),$(".closeBtn,.mask").on("click",function(i){i.stopPropagation(),r.closeModal(u)});var b=new Clipboard(".hasClip");b.on("success",function(){$.showLoading("活动地址复制成功",!0)})}};

var Infinite=function(t,n){this.container=$(t),this.container.data("infinite",this),this.distance=n||50,this.attachEvents()};Infinite.prototype.scroll=function(){var t=this.container,n=t.scrollHeight()-($(window).height()+t.scrollTop());n<=this.distance&&t.trigger("infinite")},Infinite.prototype.attachEvents=function(t){var n=this.container,i="BODY"===n[0].tagName.toUpperCase()?$(document):n;i[t?"off":"on"]("scroll",$.proxy(this.scroll,this))},Infinite.prototype.detachEvents=function(){this.attachEvents(!0)},$.fn.infinite=function(t){return this.each(function(){new Infinite(this,t)})},$.fn.destroyInfinite=function(){return this.each(function(){var t=$(this).data("infinite");t&&t.detachEvents&&t.detachEvents()})},$.fn.scrollHeight=function(){return this[0].scrollHeight};
function datePicker(t,e,a,i,l,n){var o=new Date,s=$("#"+t).html();console.log(s);var r,c,d=formatTime(s);s?d.indexOf("/")!==-1?(r=d.split("/")[0],c=d.split("/")[1]):(r=d,c=d):(r=e&&i?o.getFullYear()+"-"+(o.getMonth()+1)+"-"+(o.getDate()<10?"0"+o.getDate():o.getDate()):o.getFullYear()+"-"+o.getMonth()+"-"+(o.getDate()<10?"0"+o.getDate():o.getDate()),c=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+(o.getDate()<10?"0"+o.getDate():o.getDate())),console.log(r+" "+c);new pickerDateRange(t,{isTodayValid:!0,isSingleDay:e,startDate:r,endDate:c,inputTrigger:a,magicSelect:!1,shortOpr:i,success:function(t){l&&l(t)},clear:function(){n&&n()}})}function postNewInitFn(){function t(t){if(r){l=r.substring(0,t),n="";for(var e in labels)({}).hasOwnProperty.call(labels,e)&&(i=labels[e].name.substring(0,t),i===l&&(n+='<li data-id="'+labels[e].id+'" data-color="'+labels[e].color+'">'+labels[e].name+"</li>"));o.html(n).show()}}$("#post").on("click",function(){var t=$(this).attr("data-id");postNewFn(t)});var e=$("#viewURL"),a=$("#view");a.on("click",function(){var t=formatURL(e.val());$(".showBox").html('<iframe src="'+t+'" width="280" height="498"></iframe>')});var i,l,n="",o=$("#labelSelect"),s=$("#inputFilter"),r=s.val();s.on("input click",function(){r=s.val().toLowerCase().trim();var e=r.length;if(0===e){var a=getAllLabelToList();o.html(a).show()}t(e),selectListIndex=-1}).on("focus",function(){inputFocused=!0}).on("blur",function(){inputFocused=!1}),o.on("click","li",function(){var t=$(this),e=t.html(),a=t.data("color"),i=t.data("id");s.val(""),o.html("").hide(),selectListIndex=-1,$('<span class="tag removeAble" data-id="'+i+'" style="background-color:'+a+'">'+e+"</span>").insertBefore(".dropInput")}),$(".inputFace").on("click",".removeAble",function(){$(this).remove()});var c;o.on("mouseout",function(){c=setTimeout(function(){o.html("").hide()},500)}).on("mouseover",function(){clearTimeout(c)}),datePicker("devTime",!1,"devTimeTrigger",!1),datePicker("pubTime",!0,"pubTimeTrigger",!0)}function postNewFn(t){function e(){$.ajax({url:siteUrl+"act/?c=actmng&a="+a,type:"post",dataType:"json",async:!1,data:{name:n,author:o,backstage:s,product:r,labels:c,testUrl:d,formalUrl:m,begintime:p,endtime:f,uptime:g,introduction:h,addLabels:v,id:t,pwd:b}}).done(function(t){"100"===t.code?modal.alert("提示",i,function(){location.reload()}):modal.alert(t.msg)}).fail(function(t){modal.alert("网络错误："+t.statusText)})}var t=t||"",a="ajaxPublish",i="发布成功";isEdit&&(i="修改成功",a="ajaxUpdateById");var l=getExistedLabels(),n=$("#actName").val().trim(),o=$("input#fe").val().trim(),s=$("input#be").val().trim(),r=$("input#pm").val().trim(),c=l.existed,d=$("#testURL").val().trim(),m=$("#viewURL").val().trim(),u=$("#devTime").html().trim().split("至"),p=slashTime(u[0]),f=slashTime(u[1]),g=slashTime($("#pubTime").html()),h=$("#introduction").val(),v=l.newAdd||"";if(console.log(c),d=formatURL(d),m=formatURL(m),!n)return $.showLoading("活动名称不能为空",!0),!1;if(!o)return $.showLoading("前端不能为空",!0),!1;if(!s)return $.showLoading("后端不能为空",!0),!1;if(!r)return $.showLoading("产品不能为空",!0),!1;if(!c)return $.showLoading("技术不能为空",!0),!1;if(!m)return $.showLoading("正式地址不能为空",!0),!1;if(!d)return $.showLoading("测试地址不能为空",!0),!1;if(!p)return $.showLoading("开始时间不能为空",!0),!1;if(!f)return $.showLoading("结束时间不能为空",!0),!1;if(!g)return $.showLoading("上线不能为空",!0),!1;if(!isURL(m))return $.showLoading("正式地址不标准",!0),!1;if(!isURL(d))return $.showLoading("测试地址不标准",!0),!1;"undefined"==t&&(t="");var b="";isEdit?modal.prompt("修改验证","请输入密码",function(){b=$("#zui-prompt-input").val(),e()},function(){return $.showLoading("取消了",!0),!1}):e()}function appendList(t,e){isLoad=!1,t=t;var a=$("#tech").attr("filter-id")?$("#tech").attr("filter-id"):"all",i=$("#timeOrder").attr("filter-id"),l=$(".timeTip.active").html(),n=l?l.split("<br>"):"";console.log(n),$.ajax({url:siteUrl+"act/",type:"get",dataType:"json",data:{c:"actmng",a:"ajaxGetActList",technology:a,page:t,sort:i,timeStart:n[0],timeEnd:n[1]}}).done(function(t){if("100"===t.code){for(var a="",i=0;i<t.actlist.length;i++){for(var l="",n=0;n<t.actlist[i].labels.length;n++)l+=t.actlist[i].labels[n]?'<span class="tag" data-color="" style="background:'+t.actlist[i].labels[n].color+'">'+t.actlist[i].labels[n].name+"</span>":"";var o=parseTime(t.actlist[i].uptime);a+='<li class="listItem" data-id="'+t.actlist[i].id+'"><div class="hasHash"><a href="javascript:void(0)" class="openItem"><b>'+t.actlist[i].name+"</b>"+l+"<ul><li>作者："+t.actlist[i].author+"</li><li>上线日期："+o+'</li></ul></a><div class="tools"><i class="edit">修改</i><i class="remove">删除</i></div></div></li>'}e?$("#listContent").html(a):$("#listContent").append(a),isLoad=!0}else isLoad=!1,modal.alert(t.msg)}).fail(function(t){modal.alert("网络错误："+t.statusText)})}function getSingleInfo(t){var e="";return $.ajax({url:siteUrl+"act/",type:"get",dataType:"json",async:!1,data:{c:"actmng",a:"ajaxGetById",id:t}}).done(function(t){"100"!==t.code?modal.alert(t.msg):e=t.data[0]}).fail(function(t){modal.alert("网络错误："+t.statusText)}),e}function parseTime(t){var e=t.split("T")[0].split("-"),a=e[0]+"年"+e[1]+"月"+e[2]+"日";return a}function formatTime(t){return t=t.replace(/年/g,"-").replace(/月/g,"-").replace(/日/g,"").replace(/至/g,"/")}function slashTime(t){return t=t.replace(/-/g,"/")}function getLabelColorByID(t){var e="";for(var a in labels)t==labels[a].id&&(e=labels[a].color);return e}function getLabelNameByID(t){var e="";for(var a in labels)t==labels[a].id&&(e=labels[a].name);return e}function getAllLabelToList(){var t="";for(var e in labels)t+='<li data-id="'+labels[e].id+'" data-color="'+labels[e].color+'">'+labels[e].name+"</li>";return t}function getExistedLabels(){var t=[],e=[];$(".inputFace").find(".tag").each(function(){$(this).hasClass("imnew")?e.push($(this).html()):t.push($(this).attr("data-id"))});var a={existed:t.join(),newAdd:e.join()};return a}function isURL(t){var e=/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;return e.test(t)}function formatURL(t){return t.indexOf("//")===-1?t="http://"+t:t.indexOf("http:")===-1&&t.indexOf("https:")===-1&&(t="http:"+t),t}var $=jQuery,siteUrl="http://activities.m.test.fang.com/",imgUrl=$("#imgUrl").val(),labels=JSON.parse($("#labels").val()),labelHTML="";for(var a in labels)({}).hasOwnProperty.call(labels,a)&&(labelHTML+='<li class="filterItem" filter-id="'+labels[a].id+'">'+labels[a].name+"</li>");$("#labelDrop").html(labelHTML);var inputFocused=!1,selectListIndex=-1;$(window).on("keyup",function(t){if(inputFocused){if(13===t.keyCode){var e=$("#inputFilter"),a=e.val();e.val("");var i="";if(a)i='<span class="tag removeAble imnew">'+a+"</span>";else{var l=$("#labelSelect").find("li.active"),n=l.html(),o=l.data("color"),s=l.data("id");i='<span class="tag removeAble" data-id="'+s+'" style="background-color:'+o+'">'+n+"</span>"}$(i).insertBefore(".dropInput"),$("#labelSelect").html("").hide()}40===t.keyCode&&(selectListIndex++,$("#labelSelect").find("li").removeClass("active").eq(selectListIndex).addClass("active")),38===t.keyCode&&(selectListIndex--,$("#labelSelect").find("li").removeClass("active").eq(selectListIndex).addClass("active"))}});var modal=new modal;$("#userLog").on("click",function(t){t.stopPropagation(),modal.loginBox()});var isEdit=!1;$("#postNew").on("click",function(t){t.stopPropagation(),isEdit=!1,modal.postNew(postNewInitFn)}),$(".listBox").on("click",".openItem",function(t){t.stopPropagation();for(var e=$(this).parents(".listItem").attr("data-id"),a=getSingleInfo(e),i=encodeURIComponent(a.formalUrl),l=a.labels.split(","),n="",o=0,s=l.length;o<s;o++)n+='<span class="tag" style="background-color:'+getLabelColorByID(l[o])+'">'+getLabelNameByID(l[o])+"</span>";var r=formatURL(a.formalUrl),c=formatURL(a.testUrl);modal.ItemInfo(a.name,r,n,a.product,a.author,a.backstage,parseTime(a.begintime),parseTime(a.endtime),parseTime(a.uptime),c,a.introduction,i)}),$(".filterTitle").on("click",function(t){t.stopPropagation(),$(".filterList").not($(this).siblings(".filterList")).hide(),$(this).siblings(".filterList").fadeIn(100)}),$(".filterList").on("click",".filterItem",function(t){t.stopPropagation(),$(this).parents(".filterList").toggle(),$(this).parents(".filterList").siblings(".filterTitle").text($(this).text()).attr("filter-id",$(this).attr("filter-id")),appendList(1,!0)}),$("#dateRange").on("click",function(){$(".filterList").hide()}),$("body").not(".filterBox").on("click",function(){$(".filterList").hide()});var showDate=function(t){var e=slashTime(t.startDate),a=slashTime(t.endDate);$(".timeTip").removeClass("active").html(e+"<br>"+a).addClass("active"),appendList(1,!0)},hideDate=function(){$(".timeTip").removeClass("active"),appendList(1,!0)};datePicker("dateRange",!1,"dateRange",!1,showDate,hideDate),$("#listContent").on("click",".remove",function(t){t.stopPropagation();var e=$(this),a=e.parents(".listItem").attr("data-id");modal.prompt("删除验证","请输入密码",function(){var t=$("#zui-prompt-input").val();$.ajax({url:siteUrl+"act/",type:"get",dataType:"json",data:{c:"actmng",a:"ajaxRemoveById",id:a,pwd:t}}).done(function(t){modal.alert(t.msg),e.parents(".listItem").remove()}).fail(function(t){modal.alert("网络错误："+t.statusText)})},function(){})}),$("#listContent").on("click",".edit",function(t){t.stopPropagation(),isEdit=!0;for(var e=$(this).parents(".listItem").attr("data-id"),a=getSingleInfo(e),i=a.labels.split(","),l="",n=formatURL(a.formalUrl),o=formatURL(a.testUrl),s=0,r=i.length;s<r;s++)l+=""===i[s]?'<span class="tag removeAble">数据有误</span>':'<span class="tag removeAble" data-id="'+i[s]+'" style="background-color:'+getLabelColorByID(i[s])+'">'+getLabelNameByID(i[s])+"</span>";modal.postNew(postNewInitFn,a.name,n,l,a.product,a.author,a.backstage,parseTime(a.begintime),parseTime(a.endtime),parseTime(a.uptime),o,a.introduction,e,isEdit)}),$(".listBox").on("click",".tag",function(t){t.stopPropagation(),$.showLoading("点击了标签,todo",!0,500)});var isLoad=!0,page=2;$("body").infinite(0).on("infinite",function(){isLoad&&(appendList(page),page++)});